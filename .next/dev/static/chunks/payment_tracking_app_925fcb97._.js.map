{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///P:/payment_tracking_app/lib/config.ts"],"sourcesContent":["// Configuration to enable/disable Firebase\r\n// Set to true to use Firebase, false to use localStorage\r\nexport const USE_FIREBASE = process.env.NEXT_PUBLIC_USE_FIREBASE === \"true\"\r\n\r\n// Check if Firebase config is available\r\nexport const FIREBASE_AVAILABLE = !!(\r\n  process.env.NEXT_PUBLIC_FIREBASE_API_KEY &&\r\n  process.env.NEXT_PUBLIC_FIREBASE_PROJECT_ID\r\n)\r\n\r\n// Determine if we should use Firebase\r\nexport const IS_FIREBASE_ENABLED = USE_FIREBASE && FIREBASE_AVAILABLE\r\n\r\n"],"names":[],"mappings":"AAAA,2CAA2C;AAC3C,yDAAyD;;;;;;;;;AAC7B;AAArB,MAAM,eAAe,6CAAyC;AAG9D,MAAM,qBAAqB,CAAC,CAAC,CAClC,qIAEF;AAGO,MAAM,sBAAsB,gBAAgB"}},
    {"offset": {"line": 25, "column": 0}, "map": {"version":3,"sources":["file:///P:/payment_tracking_app/lib/firebase/config.ts"],"sourcesContent":["import { initializeApp, getApps, FirebaseApp } from \"firebase/app\"\r\nimport { getAuth, Auth } from \"firebase/auth\"\r\nimport { getFirestore, Firestore } from \"firebase/firestore\"\r\nimport { getStorage, FirebaseStorage } from \"firebase/storage\"\r\n\r\n// Check if Firebase config is available (not placeholder values)\r\nconst hasFirebaseConfig = !!(\r\n  process.env.NEXT_PUBLIC_FIREBASE_API_KEY &&\r\n  process.env.NEXT_PUBLIC_FIREBASE_PROJECT_ID &&\r\n  process.env.NEXT_PUBLIC_FIREBASE_API_KEY !== \"your_api_key_here\" &&\r\n  process.env.NEXT_PUBLIC_FIREBASE_PROJECT_ID !== \"your-project-id\" &&\r\n  process.env.NEXT_PUBLIC_FIREBASE_API_KEY.trim() !== \"\" &&\r\n  process.env.NEXT_PUBLIC_FIREBASE_PROJECT_ID.trim() !== \"\"\r\n)\r\n\r\nconst firebaseConfig = hasFirebaseConfig\r\n  ? {\r\n      apiKey: process.env.NEXT_PUBLIC_FIREBASE_API_KEY,\r\n      authDomain: process.env.NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN,\r\n      projectId: process.env.NEXT_PUBLIC_FIREBASE_PROJECT_ID,\r\n      storageBucket: process.env.NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET,\r\n      messagingSenderId: process.env.NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID,\r\n      appId: process.env.NEXT_PUBLIC_FIREBASE_APP_ID,\r\n    }\r\n  : null\r\n\r\n// Initialize Firebase only if config is available\r\nlet app: FirebaseApp | null = null\r\nlet auth: Auth | null = null\r\nlet db: Firestore | null = null\r\nlet storage: FirebaseStorage | null = null\r\n\r\nif (hasFirebaseConfig && firebaseConfig) {\r\n  try {\r\n    if (getApps().length === 0) {\r\n      app = initializeApp(firebaseConfig)\r\n    } else {\r\n      app = getApps()[0]\r\n    }\r\n\r\n    // Initialize Firebase services\r\n    auth = getAuth(app)\r\n    db = getFirestore(app)\r\n    storage = getStorage(app)\r\n  } catch (error) {\r\n    console.error(\"Firebase initialization error:\", error)\r\n    // Set to null if initialization fails\r\n    app = null\r\n    auth = null\r\n    db = null\r\n    storage = null\r\n  }\r\n}\r\n\r\n// Export with null checks - components should check if these are null before using\r\nexport { auth, db, storage }\r\nexport default app\r\n\r\n"],"names":[],"mappings":";;;;;;;;;;AAOE;AAPF;AAAA;AACA;AAAA;AACA;AAAA;AACA;AAAA;;;;;AAEA,iEAAiE;AACjE,MAAM,oBAAoB,CAAC,CAAC,CAC1B,yIAEA,gFAA6C,uBAC7C,2DAAgD,qBAChD,4EAAyC,IAAI,OAAO,MACpD,uDAA4C,IAAI,OAAO,EACzD;AAEA,MAAM,iBAAiB,oBACnB;IACE,MAAM;IACN,UAAU;IACV,SAAS;IACT,aAAa;IACb,iBAAiB;IACjB,KAAK;AACP,IACA;AAEJ,kDAAkD;AAClD,IAAI,MAA0B;AAC9B,IAAI,OAAoB;AACxB,IAAI,KAAuB;AAC3B,IAAI,UAAkC;AAEtC,IAAI,qBAAqB,gBAAgB;IACvC,IAAI;QACF,IAAI,IAAA,sMAAO,IAAG,MAAM,KAAK,GAAG;YAC1B,MAAM,IAAA,4MAAa,EAAC;QACtB,OAAO;YACL,MAAM,IAAA,sMAAO,GAAE,CAAC,EAAE;QACpB;QAEA,+BAA+B;QAC/B,OAAO,IAAA,gMAAO,EAAC;QACf,KAAK,IAAA,0MAAY,EAAC;QAClB,UAAU,IAAA,sMAAU,EAAC;IACvB,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,kCAAkC;QAChD,sCAAsC;QACtC,MAAM;QACN,OAAO;QACP,KAAK;QACL,UAAU;IACZ;AACF;;uCAIe"}},
    {"offset": {"line": 92, "column": 0}, "map": {"version":3,"sources":["file:///P:/payment_tracking_app/lib/firebase/payments.ts"],"sourcesContent":["import {\r\n  collection,\r\n  doc,\r\n  getDoc,\r\n  getDocs,\r\n  addDoc,\r\n  updateDoc,\r\n  deleteDoc,\r\n  query,\r\n  where,\r\n  orderBy,\r\n  onSnapshot,\r\n  Timestamp,\r\n  type DocumentData,\r\n} from \"firebase/firestore\"\r\nimport { db } from \"./config\"\r\n\r\n// Helper to check if Firebase is available\r\nfunction checkFirebaseAvailable(): void {\r\n  if (!db) {\r\n    throw new Error(\"Firebase is not initialized. Please check your Firebase configuration in .env.local\")\r\n  }\r\n}\r\nimport type { Payment, MonthlyAggregate } from \"../types\"\r\n\r\nconst PAYMENTS_COLLECTION = \"payments\"\r\n\r\n// Convert Firestore timestamp to ISO string\r\nconst timestampToISO = (timestamp: any): string => {\r\n  if (timestamp?.toDate) {\r\n    return timestamp.toDate().toISOString()\r\n  }\r\n  if (timestamp instanceof Timestamp) {\r\n    return timestamp.toDate().toISOString()\r\n  }\r\n  return timestamp || new Date().toISOString()\r\n}\r\n\r\n// Convert Payment to Firestore document\r\nconst paymentToFirestore = (payment: Payment): DocumentData => {\r\n  return {\r\n    ...payment,\r\n    submittedAt: Timestamp.fromDate(new Date(payment.submittedAt)),\r\n    reviewedAt: payment.reviewedAt ? Timestamp.fromDate(new Date(payment.reviewedAt)) : null,\r\n    approvedAt: payment.approvedAt ? Timestamp.fromDate(new Date(payment.approvedAt)) : null,\r\n  }\r\n}\r\n\r\n// Convert Firestore document to Payment\r\nconst firestoreToPayment = (doc: DocumentData): Payment => {\r\n  const data = doc.data()\r\n  return {\r\n    ...data,\r\n    id: doc.id,\r\n    submittedAt: timestampToISO(data.submittedAt),\r\n    reviewedAt: data.reviewedAt ? timestampToISO(data.reviewedAt) : undefined,\r\n    approvedAt: data.approvedAt ? timestampToISO(data.approvedAt) : undefined,\r\n  } as Payment\r\n}\r\n\r\nexport async function getPayments(): Promise<Payment[]> {\r\n  try {\r\n    checkFirebaseAvailable()\r\n    const paymentsRef = collection(db!, PAYMENTS_COLLECTION)\r\n    const q = query(paymentsRef, orderBy(\"submittedAt\", \"desc\"))\r\n    const querySnapshot = await getDocs(q)\r\n    return querySnapshot.docs.map(firestoreToPayment)\r\n  } catch (error) {\r\n    console.error(\"Error getting payments:\", error)\r\n    return []\r\n  }\r\n}\r\n\r\nexport async function getPayment(id: string): Promise<Payment | null> {\r\n  try {\r\n    checkFirebaseAvailable()\r\n    const paymentRef = doc(db!, PAYMENTS_COLLECTION, id)\r\n    const paymentSnap = await getDoc(paymentRef)\r\n    if (paymentSnap.exists()) {\r\n      return firestoreToPayment(paymentSnap)\r\n    }\r\n    return null\r\n  } catch (error) {\r\n    console.error(\"Error getting payment:\", error)\r\n    return null\r\n  }\r\n}\r\n\r\nexport async function savePayment(payment: Payment): Promise<void> {\r\n  try {\r\n    checkFirebaseAvailable()\r\n    if (payment.id && payment.id.startsWith(\"payment_\")) {\r\n      // Update existing payment\r\n      const paymentRef = doc(db!, PAYMENTS_COLLECTION, payment.id)\r\n      const { id, ...paymentData } = payment\r\n      await updateDoc(paymentRef, paymentToFirestore(paymentData) as any)\r\n    } else {\r\n      // Create new payment\r\n      const { id, ...paymentData } = payment\r\n      const newId = id || `payment_${Date.now()}`\r\n      const paymentRef = doc(db, PAYMENTS_COLLECTION, newId)\r\n      await updateDoc(paymentRef, { ...paymentToFirestore(paymentData), id: newId } as any)\r\n    }\r\n    } catch (error) {\r\n    // If update fails, try to create new document\r\n    try {\r\n      checkFirebaseAvailable()\r\n      const paymentsRef = collection(db!, PAYMENTS_COLLECTION)\r\n      const { id, ...paymentData } = payment\r\n      const newId = id || `payment_${Date.now()}`\r\n      await addDoc(paymentsRef, { ...paymentToFirestore(paymentData), id: newId })\r\n    } catch (addError) {\r\n      console.error(\"Error saving payment:\", addError)\r\n      throw addError\r\n    }\r\n  }\r\n}\r\n\r\nexport async function deletePayment(id: string): Promise<void> {\r\n  try {\r\n    checkFirebaseAvailable()\r\n    const paymentRef = doc(db!, PAYMENTS_COLLECTION, id)\r\n    await deleteDoc(paymentRef)\r\n  } catch (error) {\r\n    console.error(\"Error deleting payment:\", error)\r\n    throw error\r\n  }\r\n}\r\n\r\nexport async function getPaymentsByClient(clientId: string): Promise<Payment[]> {\r\n  try {\r\n    checkFirebaseAvailable()\r\n    const paymentsRef = collection(db!, PAYMENTS_COLLECTION)\r\n    const q = query(paymentsRef, where(\"clientId\", \"==\", clientId), orderBy(\"submittedAt\", \"desc\"))\r\n    const querySnapshot = await getDocs(q)\r\n    return querySnapshot.docs.map(firestoreToPayment)\r\n  } catch (error: any) {\r\n    console.error(\"Error getting payments by client:\", error)\r\n    // If it's an index error, show helpful message\r\n    if (error?.code === \"failed-precondition\" && error?.message?.includes(\"index\")) {\r\n      console.error(\r\n        \"⚠️ Firestore index required! Click the link in the error above to create it automatically, or see FIRESTORE_INDEXES.md for manual setup.\",\r\n      )\r\n    }\r\n    return []\r\n  }\r\n}\r\n\r\nexport async function getPaymentsByStatus(status: Payment[\"status\"]): Promise<Payment[]> {\r\n  try {\r\n    checkFirebaseAvailable()\r\n    const paymentsRef = collection(db!, PAYMENTS_COLLECTION)\r\n    const q = query(paymentsRef, where(\"status\", \"==\", status), orderBy(\"submittedAt\", \"desc\"))\r\n    const querySnapshot = await getDocs(q)\r\n    return querySnapshot.docs.map(firestoreToPayment)\r\n  } catch (error: any) {\r\n    console.error(\"Error getting payments by status:\", error)\r\n    // If it's an index error, show helpful message\r\n    if (error?.code === \"failed-precondition\" && error?.message?.includes(\"index\")) {\r\n      console.error(\r\n        \"⚠️ Firestore index required! Click the link in the error above to create it automatically, or see FIRESTORE_INDEXES.md for manual setup.\",\r\n      )\r\n    }\r\n    return []\r\n  }\r\n}\r\n\r\nexport function subscribeToPayments(\r\n  callback: (payments: Payment[]) => void,\r\n  clientId?: string,\r\n  status?: Payment[\"status\"],\r\n): () => void {\r\n  try {\r\n    if (!db) {\r\n      console.warn(\"Firebase not initialized, subscription disabled\")\r\n      return () => {}\r\n    }\r\n    const paymentsRef = collection(db, PAYMENTS_COLLECTION)\r\n    let q = query(paymentsRef, orderBy(\"submittedAt\", \"desc\"))\r\n\r\n    if (clientId) {\r\n      q = query(paymentsRef, where(\"clientId\", \"==\", clientId), orderBy(\"submittedAt\", \"desc\"))\r\n    }\r\n\r\n    if (status) {\r\n      q = query(\r\n        paymentsRef,\r\n        ...(clientId ? [where(\"clientId\", \"==\", clientId)] : []),\r\n        where(\"status\", \"==\", status),\r\n        orderBy(\"submittedAt\", \"desc\"),\r\n      )\r\n    }\r\n\r\n    const unsubscribe = onSnapshot(\r\n      q,\r\n      (snapshot) => {\r\n        const payments = snapshot.docs.map(firestoreToPayment)\r\n        callback(payments)\r\n      },\r\n      (error: any) => {\r\n        console.error(\"Error subscribing to payments:\", error)\r\n        // If it's an index error, show helpful message\r\n        if (error?.code === \"failed-precondition\" && error?.message?.includes(\"index\")) {\r\n          console.error(\r\n            \"⚠️ Firestore index required! Click the link in the error above to create it automatically, or see FIRESTORE_INDEXES.md for manual setup.\",\r\n          )\r\n        }\r\n        callback([])\r\n      },\r\n    )\r\n\r\n    return unsubscribe\r\n  } catch (error) {\r\n    console.error(\"Error setting up payment subscription:\", error)\r\n    return () => {}\r\n  }\r\n}\r\n\r\nexport async function getMonthlyAggregates(clientId: string): Promise<MonthlyAggregate[]> {\r\n  try {\r\n    const payments = await getPaymentsByClient(clientId)\r\n    const approvedPayments = payments.filter((p) => p.status === \"approved\")\r\n\r\n    const monthMap = new Map<string, Payment[]>()\r\n\r\n    approvedPayments.forEach((payment) => {\r\n      const date = new Date(payment.approvedAt || payment.submittedAt)\r\n      const month = date.toISOString().slice(0, 7) // YYYY-MM format\r\n\r\n      if (!monthMap.has(month)) {\r\n        monthMap.set(month, [])\r\n      }\r\n      monthMap.get(month)!.push(payment)\r\n    })\r\n\r\n    return Array.from(monthMap.entries())\r\n      .map(([month, monthPayments]) => ({\r\n        month,\r\n        amount: monthPayments.reduce((sum, p) => sum + p.amount, 0),\r\n        payments: monthPayments,\r\n      }))\r\n      .sort((a, b) => a.month.localeCompare(b.month))\r\n  } catch (error) {\r\n    console.error(\"Error getting monthly aggregates:\", error)\r\n    return []\r\n  }\r\n}\r\n\r\nexport async function getPaymentsByMonthAndClient(clientId: string, month: string): Promise<Payment[]> {\r\n  try {\r\n    const payments = await getPaymentsByClient(clientId)\r\n    return payments\r\n      .filter((p) => p.status === \"approved\")\r\n      .filter((p) => {\r\n        const date = new Date(p.approvedAt || p.submittedAt)\r\n        return date.toISOString().slice(0, 7) === month\r\n      })\r\n  } catch (error) {\r\n    console.error(\"Error getting payments by month and client:\", error)\r\n    return []\r\n  }\r\n}\r\n\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 333, "column": 0}, "map": {"version":3,"sources":["file:///P:/payment_tracking_app/lib/payment-store.ts"],"sourcesContent":["import type { Payment, Client, MonthlyAggregate, ClientSummary } from \"./types\"\nimport { IS_FIREBASE_ENABLED } from \"./config\"\nimport * as firebasePayments from \"./firebase/payments\"\n\nconst STORAGE_KEY = \"paymentTracker_payments\"\nconst CLIENTS_STORAGE_KEY = \"paymentTracker_clients\"\n\n// localStorage implementations\nfunction getPaymentsLocal(): Payment[] {\n  if (typeof window === \"undefined\") return []\n  const stored = localStorage.getItem(STORAGE_KEY)\n  return stored ? JSON.parse(stored) : []\n}\n\nfunction savePaymentLocal(payment: Payment): void {\n  if (typeof window === \"undefined\") return\n  const payments = getPaymentsLocal()\n  const existing = payments.findIndex((p) => p.id === payment.id)\n  if (existing >= 0) {\n    payments[existing] = payment\n  } else {\n    payments.push(payment)\n  }\n  localStorage.setItem(STORAGE_KEY, JSON.stringify(payments))\n}\n\nfunction deletePaymentLocal(id: string): void {\n  if (typeof window === \"undefined\") return\n  const payments = getPaymentsLocal().filter((p) => p.id !== id)\n  localStorage.setItem(STORAGE_KEY, JSON.stringify(payments))\n}\n\n// Unified API - uses Firebase if enabled, otherwise localStorage\nexport async function getPayments(): Promise<Payment[]> {\n  if (IS_FIREBASE_ENABLED) {\n    return await firebasePayments.getPayments()\n  }\n  return getPaymentsLocal()\n}\n\n// For backward compatibility, provide sync version that returns empty array if Firebase is enabled\nexport function getPaymentsSync(): Payment[] {\n  if (!IS_FIREBASE_ENABLED) {\n    return getPaymentsLocal()\n  }\n  return [] // Firebase is async, so return empty for sync calls\n}\n\nexport async function savePayment(payment: Payment): Promise<void> {\n  if (IS_FIREBASE_ENABLED) {\n    await firebasePayments.savePayment(payment)\n  } else {\n    savePaymentLocal(payment)\n  }\n}\n\nexport async function deletePayment(id: string): Promise<void> {\n  if (IS_FIREBASE_ENABLED) {\n    await firebasePayments.deletePayment(id)\n  } else {\n    deletePaymentLocal(id)\n  }\n}\n\nexport async function getPaymentsByClient(clientId: string): Promise<Payment[]> {\n  if (IS_FIREBASE_ENABLED) {\n    return await firebasePayments.getPaymentsByClient(clientId)\n  }\n  return getPaymentsLocal().filter((p) => p.clientId === clientId)\n}\n\nexport function getPaymentsByClientSync(clientId: string): Payment[] {\n  if (!IS_FIREBASE_ENABLED) {\n    return getPaymentsLocal().filter((p) => p.clientId === clientId)\n  }\n  return []\n}\n\nexport async function getPaymentsByStatus(status: Payment[\"status\"]): Promise<Payment[]> {\n  if (IS_FIREBASE_ENABLED) {\n    return await firebasePayments.getPaymentsByStatus(status)\n  }\n  return getPaymentsLocal().filter((p) => p.status === status)\n}\n\nexport function getClientByPayment(payment: Payment): Client | null {\n  const stored = localStorage.getItem(CLIENTS_STORAGE_KEY)\n  if (!stored) {\n    // Generate a default client\n    return {\n      id: payment.clientId,\n      name: `Client ${payment.clientId.slice(0, 8)}`,\n      targetAmount: 10000,\n    }\n  }\n  const clients: Client[] = JSON.parse(stored)\n  return clients.find((c) => c.id === payment.clientId) || null\n}\n\nexport function getClientsStore(): Client[] {\n  if (typeof window === \"undefined\") return []\n  const stored = localStorage.getItem(CLIENTS_STORAGE_KEY)\n  return stored ? JSON.parse(stored) : []\n}\n\nexport async function getMonthlyAggregates(clientId: string): Promise<MonthlyAggregate[]> {\n  if (IS_FIREBASE_ENABLED) {\n    return await firebasePayments.getMonthlyAggregates(clientId)\n  }\n\n  const payments = await getPaymentsByClient(clientId)\n  const approvedPayments = payments.filter((p) => p.status === \"approved\")\n\n  const monthMap = new Map<string, Payment[]>()\n\n  approvedPayments.forEach((payment) => {\n    const date = new Date(payment.approvedAt || payment.submittedAt)\n    const month = date.toISOString().slice(0, 7) // YYYY-MM format\n\n    if (!monthMap.has(month)) {\n      monthMap.set(month, [])\n    }\n    monthMap.get(month)!.push(payment)\n  })\n\n  return Array.from(monthMap.entries())\n    .map(([month, monthPayments]) => ({\n      month,\n      amount: monthPayments.reduce((sum, p) => sum + p.amount, 0),\n      payments: monthPayments,\n    }))\n    .sort((a, b) => a.month.localeCompare(b.month))\n}\n\n// Sync version for backward compatibility\nexport function getMonthlyAggregatesSync(clientId: string): MonthlyAggregate[] {\n  if (IS_FIREBASE_ENABLED) {\n    return [] // Firebase is async\n  }\n\n  const payments = getPaymentsByClientSync(clientId).filter((p) => p.status === \"approved\")\n  const monthMap = new Map<string, Payment[]>()\n\n  payments.forEach((payment) => {\n    const date = new Date(payment.approvedAt || payment.submittedAt)\n    const month = date.toISOString().slice(0, 7)\n\n    if (!monthMap.has(month)) {\n      monthMap.set(month, [])\n    }\n    monthMap.get(month)!.push(payment)\n  })\n\n  return Array.from(monthMap.entries())\n    .map(([month, monthPayments]) => ({\n      month,\n      amount: monthPayments.reduce((sum, p) => sum + p.amount, 0),\n      payments: monthPayments,\n    }))\n    .sort((a, b) => a.month.localeCompare(b.month))\n}\n\nexport async function getClientSummary(clientId: string): Promise<ClientSummary> {\n  const client = getClientByPayment({ clientId } as Payment) || { id: clientId, name: \"Unknown\", targetAmount: 10000 }\n  const payments = await getPaymentsByClient(clientId)\n  const approvedPayments = payments.filter((p) => p.status === \"approved\")\n  const totalApproved = approvedPayments.reduce((sum, p) => sum + p.amount, 0)\n\n  const monthlyData = await getMonthlyAggregates(clientId)\n  let cumulativeTotal = 0\n  let targetReachedMonth: string | undefined\n\n  for (const monthly of monthlyData) {\n    cumulativeTotal += monthly.amount\n    if (cumulativeTotal >= client.targetAmount && !targetReachedMonth) {\n      targetReachedMonth = monthly.month\n    }\n  }\n\n  return {\n    targetAmount: client.targetAmount,\n    totalApproved,\n    remaining: Math.max(0, client.targetAmount - totalApproved),\n    targetReachedMonth,\n  }\n}\n\n// Sync version for backward compatibility (only works with localStorage)\nexport function getClientSummarySync(clientId: string): ClientSummary {\n  if (IS_FIREBASE_ENABLED) {\n    // Return default values if Firebase is enabled (async version should be used)\n    return {\n      targetAmount: 0,\n      totalApproved: 0,\n      remaining: 0,\n    }\n  }\n\n  const client = getClientByPayment({ clientId } as Payment) || { id: clientId, name: \"Unknown\", targetAmount: 10000 }\n  const payments = getPaymentsByClientSync(clientId).filter((p) => p.status === \"approved\")\n  const totalApproved = payments.reduce((sum, p) => sum + p.amount, 0)\n\n  const monthlyData = getMonthlyAggregatesSync(clientId)\n  let cumulativeTotal = 0\n  let targetReachedMonth: string | undefined\n\n  for (const monthly of monthlyData) {\n    cumulativeTotal += monthly.amount\n    if (cumulativeTotal >= client.targetAmount && !targetReachedMonth) {\n      targetReachedMonth = monthly.month\n    }\n  }\n\n  return {\n    targetAmount: client.targetAmount,\n    totalApproved,\n    remaining: Math.max(0, client.targetAmount - totalApproved),\n    targetReachedMonth,\n  }\n}\n\nexport async function getPaymentsByMonthAndClient(clientId: string, month: string): Promise<Payment[]> {\n  if (IS_FIREBASE_ENABLED) {\n    return await firebasePayments.getPaymentsByMonthAndClient(clientId, month)\n  }\n\n  const payments = await getPaymentsByClient(clientId)\n  return payments\n    .filter((p) => p.status === \"approved\")\n    .filter((p) => {\n      const date = new Date(p.approvedAt || p.submittedAt)\n      return date.toISOString().slice(0, 7) === month\n    })\n}\n\n// Export Firebase subscription function\nexport function subscribeToPayments(\n  callback: (payments: Payment[]) => void,\n  clientId?: string,\n  status?: Payment[\"status\"],\n): () => void {\n  if (IS_FIREBASE_ENABLED) {\n    return firebasePayments.subscribeToPayments(callback, clientId, status)\n  }\n  // For localStorage, just call callback with current data\n  getPayments().then((payments) => {\n    let filtered = payments\n    if (clientId) filtered = filtered.filter((p) => p.clientId === clientId)\n    if (status) filtered = filtered.filter((p) => p.status === status)\n    callback(filtered)\n  })\n  return () => {} // Return empty unsubscribe function\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 595, "column": 0}, "map": {"version":3,"sources":["file:///P:/payment_tracking_app/components/admin/progress-modal.tsx"],"sourcesContent":["\"use client\"\n\nimport type { MonthlyAggregate, ClientSummary } from \"@/lib/types\"\nimport { BarChart, Bar, XAxis, YAxis, CartesianGrid, Tooltip, ResponsiveContainer } from \"recharts\"\nimport { useState } from \"react\"\nimport { X } from \"lucide-react\"\n\ninterface ProgressModalProps {\n  clientId: string\n  clientName: string\n  summary: ClientSummary\n  monthlyData: MonthlyAggregate[]\n  isOpen: boolean\n  onClose: () => void\n}\n\nexport default function ProgressModal({\n  clientId,\n  clientName,\n  summary,\n  monthlyData,\n  isOpen,\n  onClose,\n}: ProgressModalProps) {\n  const [selectedMonth, setSelectedMonth] = useState<string | null>(null)\n  const selectedPayments = selectedMonth ? monthlyData.find((m) => m.month === selectedMonth)?.payments || [] : []\n\n  if (!isOpen) return null\n\n  const chartData = monthlyData.map((m) => ({\n    month: new Date(m.month + \"-01\").toLocaleDateString(\"en-US\", { month: \"short\", year: \"numeric\" }),\n    amount: m.amount,\n    monthKey: m.month,\n  }))\n\n  const handleExportCSV = () => {\n    let csv = \"Month,Amount\\n\"\n    monthlyData.forEach((m) => {\n      const monthName = new Date(m.month + \"-01\").toLocaleDateString(\"en-US\", { month: \"short\", year: \"numeric\" })\n      csv += `${monthName},${m.amount}\\n`\n    })\n    const blob = new Blob([csv], { type: \"text/csv\" })\n    const url = window.URL.createObjectURL(blob)\n    const a = document.createElement(\"a\")\n    a.href = url\n    a.download = `${clientName}-progress.csv`\n    a.click()\n  }\n\n  return (\n    <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4\">\n      <div className=\"bg-background border border-muted/30 rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto\">\n        {/* Header */}\n        <div className=\"flex items-center justify-between p-6 border-b border-muted/30 sticky top-0 bg-background\">\n          <div>\n            <h2 className=\"text-xl font-semibold text-foreground\">Client Monthly Progress</h2>\n            <p className=\"text-sm text-muted mt-1\">{clientName}</p>\n          </div>\n          <button onClick={onClose} className=\"text-muted hover:text-foreground transition-colors\">\n            <X size={24} />\n          </button>\n        </div>\n\n        <div className=\"p-6 space-y-6\">\n          {/* Summary */}\n          <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4\">\n            <div className=\"bg-muted-background/30 border border-muted/30 rounded p-4\">\n              <p className=\"text-xs text-muted mb-1\">Target</p>\n              <p className=\"text-lg font-bold text-foreground\">₹{summary.targetAmount.toLocaleString()}</p>\n            </div>\n            <div className=\"bg-success/10 border border-muted/30 rounded p-4\">\n              <p className=\"text-xs text-muted mb-1\">Total Approved</p>\n              <p className=\"text-lg font-bold text-success\">₹{summary.totalApproved.toLocaleString()}</p>\n            </div>\n            <div className=\"bg-warning/10 border border-muted/30 rounded p-4\">\n              <p className=\"text-xs text-muted mb-1\">Remaining</p>\n              <p className=\"text-lg font-bold text-warning\">₹{summary.remaining.toLocaleString()}</p>\n            </div>\n            <div className=\"bg-primary/10 border border-muted/30 rounded p-4\">\n              <p className=\"text-xs text-muted mb-1\">Target Reached</p>\n              <p className=\"text-lg font-bold text-primary\">\n                {summary.targetReachedMonth\n                  ? new Date(summary.targetReachedMonth + \"-01\").toLocaleDateString(\"en-US\", {\n                      month: \"short\",\n                      year: \"numeric\",\n                    })\n                  : \"Pending\"}\n              </p>\n            </div>\n          </div>\n\n          {/* Chart */}\n          {chartData.length > 0 ? (\n            <div className=\"border border-muted/30 rounded p-4 bg-muted-background/10\">\n              <h3 className=\"text-sm font-semibold text-foreground mb-4\">Monthly Payments Progress</h3>\n              <ResponsiveContainer width=\"100%\" height={300}>\n                <BarChart data={chartData}>\n                  <CartesianGrid strokeDasharray=\"3 3\" stroke=\"var(--color-muted)\" />\n                  <XAxis dataKey=\"month\" stroke=\"var(--color-muted)\" />\n                  <YAxis stroke=\"var(--color-muted)\" />\n                  <Tooltip\n                    contentStyle={{\n                      backgroundColor: \"var(--color-background)\",\n                      border: \"1px solid var(--color-muted)\",\n                      borderRadius: \"8px\",\n                    }}\n                    formatter={(value) => `₹${value.toLocaleString()}`}\n                  />\n                  <Bar\n                    dataKey=\"amount\"\n                    fill=\"var(--color-primary)\"\n                    onClick={(data) => setSelectedMonth(data.payload.monthKey)}\n                    cursor=\"pointer\"\n                  />\n                </BarChart>\n              </ResponsiveContainer>\n              <p className=\"text-xs text-muted mt-2\">Click a bar to view payments for that month</p>\n            </div>\n          ) : (\n            <div className=\"text-center py-8 bg-muted-background/10 rounded border border-muted/30\">\n              <p className=\"text-muted\">No approved payments yet</p>\n            </div>\n          )}\n\n          {/* Drill-down */}\n          {selectedMonth && selectedPayments.length > 0 && (\n            <div className=\"border border-muted/30 rounded p-4 bg-muted-background/10\">\n              <h3 className=\"text-sm font-semibold text-foreground mb-4\">\n                Payments for{\" \"}\n                {new Date(selectedMonth + \"-01\").toLocaleDateString(\"en-US\", { month: \"long\", year: \"numeric\" })}\n              </h3>\n              <div className=\"space-y-3 max-h-64 overflow-y-auto\">\n                {selectedPayments.map((payment) => (\n                  <div key={payment.id} className=\"bg-background border border-muted/30 rounded p-3\">\n                    <div className=\"flex items-center justify-between\">\n                      <div>\n                        <p className=\"font-semibold text-foreground\">₹{payment.amount.toLocaleString()}</p>\n                        <p className=\"text-xs text-muted\">\n                          {new Date(payment.approvedAt || payment.submittedAt).toLocaleString(\"en-US\", {\n                            month: \"short\",\n                            day: \"numeric\",\n                            hour: \"2-digit\",\n                            minute: \"2-digit\",\n                          })}\n                        </p>\n                      </div>\n                      {payment.proofUrl && (\n                        <a\n                          href={payment.proofUrl}\n                          target=\"_blank\"\n                          rel=\"noopener noreferrer\"\n                          className=\"text-primary hover:underline text-xs\"\n                        >\n                          View\n                        </a>\n                      )}\n                    </div>\n                    {payment.description && <p className=\"text-xs text-foreground mt-1\">{payment.description}</p>}\n                  </div>\n                ))}\n              </div>\n            </div>\n          )}\n\n          {/* Export */}\n          <div className=\"flex gap-3 pt-4 border-t border-muted/30\">\n            <button\n              onClick={handleExportCSV}\n              className=\"flex-1 py-2 px-4 rounded bg-muted-background text-foreground font-medium hover:bg-muted-background/80 transition-colors\"\n            >\n              Export CSV\n            </button>\n            <button\n              onClick={onClose}\n              className=\"flex-1 py-2 px-4 rounded bg-primary text-primary-foreground font-medium hover:opacity-90 transition-opacity\"\n            >\n              Close\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1082, "column": 0}, "map": {"version":3,"sources":["file:///P:/payment_tracking_app/components/admin/payment-review-card.tsx"],"sourcesContent":["\"use client\"\n\nimport type { Payment, ClientSummary, MonthlyAggregate } from \"@/lib/types\"\nimport { savePayment } from \"@/lib/payment-store\"\nimport { createNotification } from \"@/lib/notifications\"\nimport { useState, useEffect } from \"react\"\nimport ProgressModal from \"./progress-modal\"\nimport { getClientByPayment, getMonthlyAggregates, getClientSummary } from \"@/lib/payment-store\"\nimport { useAuth } from \"@/lib/auth-context\"\n\ninterface PaymentReviewCardProps {\n  payment: Payment\n  onUpdate: () => void\n}\n\nexport default function PaymentReviewCard({ payment, onUpdate }: PaymentReviewCardProps) {\n  const [notes, setNotes] = useState(payment.adminNotes || \"\")\n  const [isUpdating, setIsUpdating] = useState(false)\n  const [showProgressModal, setShowProgressModal] = useState(false)\n  const [summary, setSummary] = useState<ClientSummary | null>(null)\n  const [monthlyData, setMonthlyData] = useState<MonthlyAggregate[]>([])\n  const { decrementClientRemaining } = useAuth()\n\n  useEffect(() => {\n    const loadData = async () => {\n      try {\n        const [summaryData, monthlyDataData] = await Promise.all([\n          getClientSummary(payment.clientId),\n          getMonthlyAggregates(payment.clientId),\n        ])\n        setSummary(summaryData)\n        setMonthlyData(monthlyDataData)\n      } catch (error) {\n        console.error(\"Error loading payment data:\", error)\n      }\n    }\n    loadData()\n  }, [payment.clientId])\n\n  const handleApprove = async () => {\n    setIsUpdating(true)\n    const updated: Payment = {\n      ...payment,\n      status: \"approved\",\n      reviewedAt: new Date().toISOString(),\n      adminNotes: notes,\n      approvedAt: new Date().toISOString(),\n      approvedBy: \"admin_1\",\n    }\n    await savePayment(updated)\n\n    decrementClientRemaining(payment.clientId, payment.amount)\n\n    createNotification(\n      payment.clientId,\n      \"payment_approved\",\n      payment.id,\n      \"Payment Approved\",\n      `Your payment of ₹${payment.amount.toLocaleString(\"en-IN\")} has been approved.`,\n    )\n\n    setTimeout(() => {\n      setIsUpdating(false)\n      setShowProgressModal(true)\n      onUpdate()\n    }, 300)\n  }\n\n  const handleReject = async () => {\n    if (!notes.trim()) {\n      alert(\"Please provide a reason for rejection in admin notes\")\n      return\n    }\n\n    setIsUpdating(true)\n    const updated: Payment = {\n      ...payment,\n      status: \"rejected\",\n      reviewedAt: new Date().toISOString(),\n      adminNotes: notes,\n    }\n    await savePayment(updated)\n\n    createNotification(\n      payment.clientId,\n      \"payment_rejected\",\n      payment.id,\n      \"Payment Rejected\",\n      `Your payment of ₹${payment.amount.toLocaleString(\"en-IN\")} has been rejected. Reason: ${notes}`,\n    )\n\n    setTimeout(() => {\n      setIsUpdating(false)\n      onUpdate()\n    }, 300)\n  }\n\n  const ocrDifference = payment.ocrAmount && payment.amount ? Math.abs(payment.ocrAmount - payment.amount) : 0\n  const ocrMatch = payment.ocrAmount && payment.amount ? Math.abs(payment.ocrAmount - payment.amount) < 0.01 : null\n\n  const client = getClientByPayment(payment)\n\n  return (\n    <>\n      <div className=\"border border-muted/30 rounded p-2 sm:p-4 bg-muted-background/30 space-y-2 sm:space-y-4\">\n        {payment.status === \"pending\" && (\n          <div className=\"flex gap-2 sm:gap-3 p-2 sm:p-3 bg-primary/10 border border-primary/30 rounded-lg\">\n            <button\n              onClick={handleApprove}\n              disabled={isUpdating}\n              className=\"flex-1 py-2 sm:py-3 px-3 sm:px-6 rounded-lg bg-green-600 text-white text-sm sm:text-base font-bold hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all active:scale-95 flex items-center justify-center gap-2 shadow-md\"\n            >\n              {isUpdating ? (\n                <>\n                  <span className=\"animate-spin\">⏳</span>\n                  <span>Approving...</span>\n                </>\n              ) : (\n                <>\n                  <span className=\"text-lg\">✓</span>\n                  <span>Approve</span>\n                </>\n              )}\n            </button>\n            <button\n              onClick={handleReject}\n              disabled={isUpdating}\n              className=\"flex-1 py-2 sm:py-3 px-3 sm:px-6 rounded-lg bg-red-600 text-white text-sm sm:text-base font-bold hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all active:scale-95 flex items-center justify-center gap-2 shadow-md\"\n            >\n              {isUpdating ? (\n                <>\n                  <span className=\"animate-spin\">⏳</span>\n                  <span>Rejecting...</span>\n                </>\n              ) : (\n                <>\n                  <span className=\"text-lg\">✗</span>\n                  <span>Reject</span>\n                </>\n              )}\n            </button>\n          </div>\n        )}\n\n        <div className=\"flex items-start justify-between\">\n          <div className=\"space-y-0.5 sm:space-y-1\">\n            <p className=\"text-xs sm:text-sm text-muted\">Payment ID: {payment.id}</p>\n            <p className=\"text-base sm:text-lg font-semibold text-foreground\">\n              ₹{payment.amount.toLocaleString(\"en-IN\")}\n            </p>\n          </div>\n          <span\n            className={`px-2 sm:px-3 py-0.5 sm:py-1 rounded text-xs sm:text-sm font-medium ${\n              payment.status === \"pending\"\n                ? \"bg-warning/20 text-warning\"\n                : payment.status === \"approved\"\n                  ? \"bg-success/20 text-success\"\n                  : \"bg-destructive/20 text-destructive\"\n            }`}\n          >\n            {payment.status.charAt(0).toUpperCase() + payment.status.slice(1)}\n          </span>\n        </div>\n\n        <div className=\"grid grid-cols-2 gap-2 sm:gap-4 text-xs sm:text-sm\">\n          <div>\n            <p className=\"text-muted mb-0.5 sm:mb-1\">Description</p>\n            <p className=\"text-foreground\">{payment.description}</p>\n          </div>\n          {payment.ocrAmount && (\n            <div>\n              <p className=\"text-muted mb-0.5 sm:mb-1\">\n                OCR Amount{\" \"}\n                {ocrMatch ? <span className=\"text-success\">✓</span> : <span className=\"text-warning\">!</span>}\n              </p>\n              <p className=\"text-foreground\">\n                ₹{payment.ocrAmount.toLocaleString(\"en-IN\")}\n                {ocrDifference > 0 && (\n                  <span className=\"text-warning ml-1 sm:ml-2 text-xs\">\n                    (Diff: ₹{ocrDifference.toLocaleString(\"en-IN\")})\n                  </span>\n                )}\n              </p>\n            </div>\n          )}\n          <div>\n            <p className=\"text-muted mb-0.5 sm:mb-1\">Submitted</p>\n            <p className=\"text-foreground\">{new Date(payment.submittedAt).toLocaleDateString(\"en-IN\")}</p>\n          </div>\n          <div>\n            <p className=\"text-muted mb-0.5 sm:mb-1\">Client ID</p>\n            <p className=\"text-foreground font-mono text-[10px] sm:text-xs\">{payment.clientId}</p>\n          </div>\n        </div>\n\n        {payment.proofUrl && (\n          <div className=\"border border-muted/30 rounded p-2 sm:p-3 bg-background/50\">\n            <p className=\"text-xs sm:text-sm text-muted mb-1 sm:mb-2\">Proof Document</p>\n            <a\n              href={payment.proofUrl}\n              target=\"_blank\"\n              rel=\"noopener noreferrer\"\n              className=\"text-primary hover:underline text-xs sm:text-sm break-all\"\n            >\n              View Document\n            </a>\n          </div>\n        )}\n\n        {payment.status === \"pending\" && (\n          <div>\n            <label className=\"block text-xs sm:text-sm text-muted mb-1\">Admin Notes (required for rejection)</label>\n            <textarea\n              value={notes}\n              onChange={(e) => setNotes(e.target.value)}\n              placeholder=\"Add admin notes...\"\n              className=\"w-full p-2 sm:p-3 rounded bg-background border border-muted text-foreground text-xs sm:text-sm resize-none h-16 sm:h-20\"\n            />\n          </div>\n        )}\n\n        {payment.status !== \"pending\" && payment.adminNotes && (\n          <div className=\"border border-muted/30 rounded p-2 sm:p-3 bg-background/50\">\n            <p className=\"text-xs sm:text-sm text-muted mb-0.5 sm:mb-1\">Admin Notes</p>\n            <p className=\"text-foreground text-xs sm:text-sm\">{payment.adminNotes}</p>\n          </div>\n        )}\n      </div>\n\n      {client && summary && (\n        <ProgressModal\n          clientId={payment.clientId}\n          clientName={client.name}\n          summary={summary}\n          monthlyData={monthlyData}\n          isOpen={showProgressModal}\n          onClose={() => setShowProgressModal(false)}\n        />\n      )}\n    </>\n  )\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1578, "column": 0}, "map": {"version":3,"sources":["file:///P:/payment_tracking_app/components/admin/payment-stats.tsx"],"sourcesContent":["\"use client\"\n\ntype FilterType = \"all\" | \"pending\" | \"approved\" | \"rejected\"\n\ninterface StatCard {\n  label: string\n  value: number\n  color: string\n  filter: FilterType\n}\n\ninterface PaymentStatsProps {\n  stats: {\n    pending: number\n    approved: number\n    rejected: number\n    total: number\n  }\n  onFilterChange?: (filter: FilterType) => void\n  activeFilter?: FilterType\n}\n\nexport default function PaymentStats({ stats, onFilterChange, activeFilter = \"all\" }: PaymentStatsProps) {\n  const cards: StatCard[] = [\n    { label: \"Total Payments\", value: stats.total, color: \"bg-muted-background\", filter: \"all\" },\n    { label: \"Pending Review\", value: stats.pending, color: \"bg-warning/10\", filter: \"pending\" },\n    { label: \"Approved\", value: stats.approved, color: \"bg-success/10\", filter: \"approved\" },\n    { label: \"Rejected\", value: stats.rejected, color: \"bg-destructive/10\", filter: \"rejected\" },\n  ]\n\n  return (\n    <div className=\"grid grid-cols-2 md:grid-cols-4 gap-2 sm:gap-4\">\n      {cards.map((card) => (\n        <button\n          key={card.label}\n          onClick={() => onFilterChange?.(card.filter)}\n          className={`p-2 sm:p-4 rounded border text-left transition-all ${card.color} ${\n            activeFilter === card.filter\n              ? \"border-primary ring-2 ring-primary/30\"\n              : \"border-muted/30 hover:border-primary/50\"\n          } cursor-pointer hover:scale-[1.02] active:scale-[0.98]`}\n        >\n          <p className=\"text-xs sm:text-sm text-muted mb-1\">{card.label}</p>\n          <p className=\"text-xl sm:text-3xl font-bold text-foreground\">{card.value}</p>\n        </button>\n      ))}\n    </div>\n  )\n}\n"],"names":[],"mappings":";;;;;AAAA;;AAsBe,SAAS,aAAa,EAAE,KAAK,EAAE,cAAc,EAAE,eAAe,KAAK,EAAqB;IACrG,MAAM,QAAoB;QACxB;YAAE,OAAO;YAAkB,OAAO,MAAM,KAAK;YAAE,OAAO;YAAuB,QAAQ;QAAM;QAC3F;YAAE,OAAO;YAAkB,OAAO,MAAM,OAAO;YAAE,OAAO;YAAiB,QAAQ;QAAU;QAC3F;YAAE,OAAO;YAAY,OAAO,MAAM,QAAQ;YAAE,OAAO;YAAiB,QAAQ;QAAW;QACvF;YAAE,OAAO;YAAY,OAAO,MAAM,QAAQ;YAAE,OAAO;YAAqB,QAAQ;QAAW;KAC5F;IAED,qBACE,qNAAC;QAAI,WAAU;kBACZ,MAAM,GAAG,CAAC,CAAC,qBACV,qNAAC;gBAEC,SAAS,IAAM,iBAAiB,KAAK,MAAM;gBAC3C,WAAW,CAAC,mDAAmD,EAAE,KAAK,KAAK,CAAC,CAAC,EAC3E,iBAAiB,KAAK,MAAM,GACxB,0CACA,0CACL,sDAAsD,CAAC;;kCAExD,qNAAC;wBAAE,WAAU;kCAAsC,KAAK,KAAK;;;;;;kCAC7D,qNAAC;wBAAE,WAAU;kCAAiD,KAAK,KAAK;;;;;;;eATnE,KAAK,KAAK;;;;;;;;;;AAczB;KA1BwB"}},
    {"offset": {"line": 1656, "column": 0}, "map": {"version":3,"sources":["file:///P:/payment_tracking_app/lib/utils.ts"],"sourcesContent":["import { clsx, type ClassValue } from 'clsx'\nimport { twMerge } from 'tailwind-merge'\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs))\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEO,SAAS,GAAG,GAAG,MAAoB;IACxC,OAAO,IAAA,iMAAO,EAAC,IAAA,wKAAI,EAAC;AACtB"}},
    {"offset": {"line": 1674, "column": 0}, "map": {"version":3,"sources":["file:///P:/payment_tracking_app/components/ui/button.tsx"],"sourcesContent":["import * as React from 'react'\nimport { Slot } from '@radix-ui/react-slot'\nimport { cva, type VariantProps } from 'class-variance-authority'\n\nimport { cn } from '@/lib/utils'\n\nconst buttonVariants = cva(\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive\",\n  {\n    variants: {\n      variant: {\n        default: 'bg-primary text-primary-foreground hover:bg-primary/90',\n        destructive:\n          'bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60',\n        outline:\n          'border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50',\n        secondary:\n          'bg-secondary text-secondary-foreground hover:bg-secondary/80',\n        ghost:\n          'hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50',\n        link: 'text-primary underline-offset-4 hover:underline',\n      },\n      size: {\n        default: 'h-9 px-4 py-2 has-[>svg]:px-3',\n        sm: 'h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5',\n        lg: 'h-10 rounded-md px-6 has-[>svg]:px-4',\n        icon: 'size-9',\n        'icon-sm': 'size-8',\n        'icon-lg': 'size-10',\n      },\n    },\n    defaultVariants: {\n      variant: 'default',\n      size: 'default',\n    },\n  },\n)\n\nfunction Button({\n  className,\n  variant,\n  size,\n  asChild = false,\n  ...props\n}: React.ComponentProps<'button'> &\n  VariantProps<typeof buttonVariants> & {\n    asChild?: boolean\n  }) {\n  const Comp = asChild ? Slot : 'button'\n\n  return (\n    <Comp\n      data-slot=\"button\"\n      className={cn(buttonVariants({ variant, size, className }))}\n      {...props}\n    />\n  )\n}\n\nexport { Button, buttonVariants }\n"],"names":[],"mappings":";;;;;;;AACA;AACA;AAEA;;;;;AAEA,MAAM,iBAAiB,IAAA,kMAAG,EACxB,+bACA;IACE,UAAU;QACR,SAAS;YACP,SAAS;YACT,aACE;YACF,SACE;YACF,WACE;YACF,OACE;YACF,MAAM;QACR;QACA,MAAM;YACJ,SAAS;YACT,IAAI;YACJ,IAAI;YACJ,MAAM;YACN,WAAW;YACX,WAAW;QACb;IACF;IACA,iBAAiB;QACf,SAAS;QACT,MAAM;IACR;AACF;AAGF,SAAS,OAAO,EACd,SAAS,EACT,OAAO,EACP,IAAI,EACJ,UAAU,KAAK,EACf,GAAG,OAIF;IACD,MAAM,OAAO,UAAU,mMAAI,GAAG;IAE9B,qBACE,qNAAC;QACC,aAAU;QACV,WAAW,IAAA,6IAAE,EAAC,eAAe;YAAE;YAAS;YAAM;QAAU;QACvD,GAAG,KAAK;;;;;;AAGf;KAnBS"}},
    {"offset": {"line": 1739, "column": 0}, "map": {"version":3,"sources":["file:///P:/payment_tracking_app/components/ui/card.tsx"],"sourcesContent":["import * as React from 'react'\n\nimport { cn } from '@/lib/utils'\n\nfunction Card({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"card\"\n      className={cn(\n        'bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction CardHeader({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"card-header\"\n      className={cn(\n        '@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction CardTitle({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"card-title\"\n      className={cn('leading-none font-semibold', className)}\n      {...props}\n    />\n  )\n}\n\nfunction CardDescription({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"card-description\"\n      className={cn('text-muted-foreground text-sm', className)}\n      {...props}\n    />\n  )\n}\n\nfunction CardAction({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"card-action\"\n      className={cn(\n        'col-start-2 row-span-2 row-start-1 self-start justify-self-end',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction CardContent({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"card-content\"\n      className={cn('px-6', className)}\n      {...props}\n    />\n  )\n}\n\nfunction CardFooter({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"card-footer\"\n      className={cn('flex items-center px-6 [.border-t]:pt-6', className)}\n      {...props}\n    />\n  )\n}\n\nexport {\n  Card,\n  CardHeader,\n  CardFooter,\n  CardTitle,\n  CardAction,\n  CardDescription,\n  CardContent,\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;AAEA;;;AAEA,SAAS,KAAK,EAAE,SAAS,EAAE,GAAG,OAAoC;IAChE,qBACE,qNAAC;QACC,aAAU;QACV,WAAW,IAAA,6IAAE,EACX,qFACA;QAED,GAAG,KAAK;;;;;;AAGf;KAXS;AAaT,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,qNAAC;QACC,aAAU;QACV,WAAW,IAAA,6IAAE,EACX,4JACA;QAED,GAAG,KAAK;;;;;;AAGf;MAXS;AAaT,SAAS,UAAU,EAAE,SAAS,EAAE,GAAG,OAAoC;IACrE,qBACE,qNAAC;QACC,aAAU;QACV,WAAW,IAAA,6IAAE,EAAC,8BAA8B;QAC3C,GAAG,KAAK;;;;;;AAGf;MARS;AAUT,SAAS,gBAAgB,EAAE,SAAS,EAAE,GAAG,OAAoC;IAC3E,qBACE,qNAAC;QACC,aAAU;QACV,WAAW,IAAA,6IAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGf;MARS;AAUT,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,qNAAC;QACC,aAAU;QACV,WAAW,IAAA,6IAAE,EACX,kEACA;QAED,GAAG,KAAK;;;;;;AAGf;MAXS;AAaT,SAAS,YAAY,EAAE,SAAS,EAAE,GAAG,OAAoC;IACvE,qBACE,qNAAC;QACC,aAAU;QACV,WAAW,IAAA,6IAAE,EAAC,QAAQ;QACrB,GAAG,KAAK;;;;;;AAGf;MARS;AAUT,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,qNAAC;QACC,aAAU;QACV,WAAW,IAAA,6IAAE,EAAC,2CAA2C;QACxD,GAAG,KAAK;;;;;;AAGf;MARS"}},
    {"offset": {"line": 1859, "column": 0}, "map": {"version":3,"sources":["file:///P:/payment_tracking_app/components/admin/client-management.tsx"],"sourcesContent":["\"use client\"\n\nimport type React from \"react\"\nimport { useState } from \"react\"\nimport { useAuth } from \"@/lib/auth-context\"\nimport { getPaymentsByClient } from \"@/lib/payment-store\"\nimport type { Payment } from \"@/lib/types\"\nimport { Button } from \"@/components/ui/button\"\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\"\nimport {\n  UserPlus,\n  Trash2,\n  Eye,\n  EyeOff,\n  Users,\n  AlertTriangle,\n  ChevronDown,\n  ChevronUp,\n  IndianRupee,\n  Calendar,\n  FileText,\n  CheckCircle,\n  XCircle,\n  Clock,\n  Target,\n  Edit2,\n  Save,\n  X,\n} from \"lucide-react\"\n\nfunction StatusBadge({ status }: { status: Payment[\"status\"] }) {\n  const config = {\n    pending: { icon: Clock, className: \"bg-yellow-500/20 text-yellow-400 border-yellow-500/30\" },\n    approved: { icon: CheckCircle, className: \"bg-green-500/20 text-green-400 border-green-500/30\" },\n    rejected: { icon: XCircle, className: \"bg-red-500/20 text-red-400 border-red-500/30\" },\n  }\n  const { icon: Icon, className } = config[status]\n  return (\n    <span\n      className={`inline-flex items-center gap-1 px-2 py-0.5 rounded text-xs sm:text-sm font-medium border ${className}`}\n    >\n      <Icon className=\"h-3 w-3 sm:h-4 sm:w-4\" />\n      {status.charAt(0).toUpperCase() + status.slice(1)}\n    </span>\n  )\n}\n\nexport default function ClientManagement() {\n  const { addClient, getClients, deleteClient, updateClientTarget } = useAuth()\n  const [clients, setClients] = useState(getClients())\n  const [showForm, setShowForm] = useState(false)\n  const [showDeleteConfirm, setShowDeleteConfirm] = useState<string | null>(null)\n  const [clientToDelete, setClientToDelete] = useState<{ id: string; name: string } | null>(null)\n  const [showPasswords, setShowPasswords] = useState<Record<string, boolean>>({})\n  const [expandedClient, setExpandedClient] = useState<string | null>(null)\n  const [clientPayments, setClientPayments] = useState<Record<string, Payment[]>>({})\n  const [error, setError] = useState(\"\")\n  const [success, setSuccess] = useState(\"\")\n  const [email, setEmail] = useState(\"\")\n  const [password, setPassword] = useState(\"\")\n  const [name, setName] = useState(\"\")\n  const [targetAmount, setTargetAmount] = useState(\"\")\n  const [editingTarget, setEditingTarget] = useState<string | null>(null)\n  const [editTargetValue, setEditTargetValue] = useState(\"\")\n\n  const toggleClientPayments = async (clientId: string) => {\n    if (expandedClient === clientId) {\n      setExpandedClient(null)\n    } else {\n      const payments = await getPaymentsByClient(clientId)\n      setClientPayments((prev) => ({ ...prev, [clientId]: payments }))\n      setExpandedClient(clientId)\n    }\n  }\n\n  const getClientStats = (payments: Payment[]) => {\n    const total = payments.reduce((sum, p) => sum + p.amount, 0)\n    const approved = payments.filter((p) => p.status === \"approved\").reduce((sum, p) => sum + p.amount, 0)\n    const pending = payments.filter((p) => p.status === \"pending\").reduce((sum, p) => sum + p.amount, 0)\n    const rejected = payments.filter((p) => p.status === \"rejected\").reduce((sum, p) => sum + p.amount, 0)\n    return { total, approved, pending, rejected, count: payments.length }\n  }\n\n  const handleAddClient = (e: React.FormEvent) => {\n    e.preventDefault()\n    setError(\"\")\n    setSuccess(\"\")\n\n    if (!email || !password || !name || !targetAmount) {\n      setError(\"All fields are required including target amount\")\n      return\n    }\n\n    const target = Number.parseFloat(targetAmount)\n    if (isNaN(target) || target <= 0) {\n      setError(\"Please enter a valid target amount\")\n      return\n    }\n\n    const result = addClient(email, password, name, target)\n    if (result.success) {\n      setSuccess(`Client \"${name}\" added successfully with target ₹${target.toLocaleString(\"en-IN\")}`)\n      setEmail(\"\")\n      setPassword(\"\")\n      setName(\"\")\n      setTargetAmount(\"\")\n      setClients(getClients())\n      setShowForm(false)\n    } else {\n      setError(result.error || \"Failed to add client\")\n    }\n  }\n\n  const handleSaveTarget = (clientId: string) => {\n    const newTarget = Number.parseFloat(editTargetValue)\n    if (isNaN(newTarget) || newTarget <= 0) {\n      setError(\"Please enter a valid target amount\")\n      return\n    }\n    updateClientTarget(clientId, newTarget)\n    setClients(getClients())\n    setEditingTarget(null)\n    setEditTargetValue(\"\")\n    setSuccess(\"Target amount updated successfully\")\n  }\n\n  const handleDeleteClient = (clientId: string, clientName: string) => {\n    setClientToDelete({ id: clientId, name: clientName })\n    setShowDeleteConfirm(clientId)\n  }\n\n  const confirmDelete = () => {\n    if (clientToDelete) {\n      deleteClient(clientToDelete.id)\n      setClients(getClients())\n      setSuccess(`Client \"${clientToDelete.name}\" has been removed successfully`)\n      setShowDeleteConfirm(null)\n      setClientToDelete(null)\n    }\n  }\n\n  const cancelDelete = () => {\n    setShowDeleteConfirm(null)\n    setClientToDelete(null)\n  }\n\n  const togglePasswordVisibility = (clientId: string) => {\n    setShowPasswords((prev) => ({ ...prev, [clientId]: !prev[clientId] }))\n  }\n\n  return (\n    <Card className=\"border-muted/30 text-slate-400 font-sans bg-popover-foreground\">\n      <CardHeader className=\"pb-4\">\n        <div className=\"flex items-center justify-between\">\n          <CardTitle className=\"flex items-center gap-2 text-sm sm:text-lg\">\n            <Users className=\"h-4 w-4 sm:h-5 sm:w-5 text-primary\" />\n            <span className=\"hidden sm:inline\">Client Management</span>\n            <span className=\"sm:hidden\">Clients</span>\n          </CardTitle>\n          <Button\n            onClick={() => setShowForm(!showForm)}\n            size=\"sm\"\n            className=\"bg-primary hover:bg-primary/90 text-xs sm:text-sm px-2 sm:px-3 py-1 sm:py-2 h-auto\"\n          >\n            <UserPlus className=\"h-3 w-3 sm:h-4 sm:w-4 sm:mr-2\" />\n            <span className=\"hidden sm:inline\">Add Client</span>\n            <span className=\"sm:hidden ml-1\">Add</span>\n          </Button>\n        </div>\n      </CardHeader>\n      <CardContent className=\"space-y-4\">\n        {error && (\n          <div className=\"bg-destructive/20 text-destructive border border-destructive/30 rounded p-2 sm:p-3 text-xs sm:text-sm\">\n            {error}\n          </div>\n        )}\n        {success && (\n          <div className=\"bg-green-500/20 text-green-400 border border-green-500/30 rounded p-2 sm:p-3 text-xs sm:text-sm\">\n            {success}\n          </div>\n        )}\n\n        {showForm && (\n          <form\n            onSubmit={handleAddClient}\n            className=\"bg-muted-background/50 rounded-lg p-3 sm:p-4 space-y-3 sm:space-y-4 border border-muted/30\"\n          >\n            <h3 className=\"font-medium text-foreground text-sm sm:text-base\">Add New Client</h3>\n            <div className=\"grid gap-3 sm:gap-4 sm:grid-cols-2\">\n              <div>\n                <label className=\"block text-xs sm:text-sm font-medium text-muted mb-1\">Name</label>\n                <input\n                  type=\"text\"\n                  value={name}\n                  onChange={(e) => setName(e.target.value)}\n                  placeholder=\"Client Name\"\n                  className=\"w-full px-2 sm:px-3 py-1.5 sm:py-2 rounded bg-background border border-muted/30 text-foreground text-xs sm:text-sm\"\n                  required\n                />\n              </div>\n              <div>\n                <label className=\"block text-xs sm:text-sm font-medium text-muted mb-1\">Email</label>\n                <input\n                  type=\"email\"\n                  value={email}\n                  onChange={(e) => setEmail(e.target.value)}\n                  placeholder=\"client@example.com\"\n                  className=\"w-full px-2 sm:px-3 py-1.5 sm:py-2 rounded bg-background border border-muted/30 text-foreground text-xs sm:text-sm\"\n                  required\n                />\n              </div>\n              <div>\n                <label className=\"block text-xs sm:text-sm font-medium text-muted mb-1\">Password</label>\n                <input\n                  type=\"text\"\n                  value={password}\n                  onChange={(e) => setPassword(e.target.value)}\n                  placeholder=\"Set password\"\n                  className=\"w-full px-2 sm:px-3 py-1.5 sm:py-2 rounded bg-background border border-muted/30 text-foreground text-xs sm:text-sm\"\n                  required\n                />\n              </div>\n              <div>\n                <label className=\"block text-xs sm:text-sm font-medium text-muted mb-1 flex items-center gap-1\">\n                  <Target className=\"h-3 w-3 sm:h-4 sm:w-4\" />\n                  Target Amount (₹)\n                </label>\n                <input\n                  type=\"number\"\n                  value={targetAmount}\n                  onChange={(e) => setTargetAmount(e.target.value)}\n                  placeholder=\"e.g., 100000\"\n                  className=\"w-full px-2 sm:px-3 py-1.5 sm:py-2 rounded bg-background border border-muted/30 text-foreground text-xs sm:text-sm\"\n                  required\n                  min=\"1\"\n                />\n              </div>\n            </div>\n            <div className=\"flex gap-2\">\n              <Button\n                type=\"submit\"\n                size=\"sm\"\n                className=\"bg-green-600 hover:bg-green-700 text-xs sm:text-sm px-2 sm:px-3 h-auto py-1.5 sm:py-2\"\n              >\n                <span className=\"hidden sm:inline\">Create Client</span>\n                <span className=\"sm:hidden\">Create</span>\n              </Button>\n              <Button\n                type=\"button\"\n                size=\"sm\"\n                variant=\"outline\"\n                onClick={() => setShowForm(false)}\n                className=\"text-xs sm:text-sm px-2 sm:px-3 h-auto py-1.5 sm:py-2\"\n              >\n                Cancel\n              </Button>\n            </div>\n          </form>\n        )}\n\n        {showDeleteConfirm && clientToDelete && (\n          <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-50\">\n            <div className=\"bg-background border border-muted/30 rounded-lg p-6 max-w-md w-full mx-4 shadow-xl\">\n              <div className=\"flex items-center gap-3 mb-4\">\n                <div className=\"bg-destructive/20 p-2 rounded-full\">\n                  <AlertTriangle className=\"h-6 w-6 text-destructive\" />\n                </div>\n                <h3 className=\"text-lg font-semibold text-foreground\">Remove Client</h3>\n              </div>\n              <p className=\"text-muted mb-2\">Are you sure you want to remove this client?</p>\n              <p className=\"text-foreground font-medium mb-4 bg-muted-background/50 p-2 rounded\">\n                {clientToDelete.name}\n              </p>\n              <p className=\"text-sm text-destructive/80 mb-6\">\n                This action cannot be undone. All payment data associated with this client will remain in the system.\n              </p>\n              <div className=\"flex gap-3 justify-end\">\n                <Button variant=\"outline\" onClick={cancelDelete}>\n                  Cancel\n                </Button>\n                <Button\n                  onClick={confirmDelete}\n                  className=\"bg-destructive hover:bg-destructive/90 text-destructive-foreground\"\n                >\n                  <Trash2 className=\"h-4 w-4 sm:h-5 sm:w-5 mr-2 sm:mr-3\" />\n                  Remove Client\n                </Button>\n              </div>\n            </div>\n          </div>\n        )}\n\n        <div className=\"space-y-3\">\n          <div className=\"flex items-center justify-between\">\n            <h3 className=\"text-xs sm:text-sm font-medium text-muted\">Registered Clients ({clients.length})</h3>\n            {clients.length > 0 && (\n              <span className=\"text-[10px] sm:text-xs text-muted hidden sm:inline\">\n                Click on client to view payments\n              </span>\n            )}\n          </div>\n          {clients.length > 0 ? (\n            <div className=\"divide-y divide-muted/20 border border-muted/20 rounded-lg overflow-hidden\">\n              {clients.map((client) => {\n                const isExpanded = expandedClient === client.id\n                const payments = clientPayments[client.id] || []\n                // Ensure payments is an array before calling getClientStats\n                const stats = getClientStats(Array.isArray(payments) ? payments : [])\n                const isEditingThis = editingTarget === client.id\n\n                return (\n                  <div key={client.id} className=\"bg-muted-background/30\">\n                    <div\n                      className=\"flex items-center justify-between p-2 sm:p-4 hover:bg-muted-background/50 transition-colors cursor-pointer\"\n                      onClick={() => toggleClientPayments(client.id)}\n                    >\n                      <div className=\"flex-1 min-w-0\">\n                        <div className=\"flex items-center gap-2\">\n                          <p className=\"font-medium text-foreground text-xs sm:text-base truncate\">{client.name}</p>\n                          {isExpanded ? (\n                            <ChevronUp className=\"h-3 w-3 sm:h-4 sm:w-4 text-muted shrink-0\" />\n                          ) : (\n                            <ChevronDown className=\"h-3 w-3 sm:h-4 sm:w-4 text-muted shrink-0\" />\n                          )}\n                        </div>\n                        <p className=\"text-[10px] sm:text-sm text-muted truncate\">{client.email}</p>\n                        <div className=\"flex items-center gap-1 sm:gap-2 mt-1\">\n                          <span className=\"text-[10px] sm:text-xs text-muted\">Pwd:</span>\n                          <span className=\"text-[10px] sm:text-xs font-mono bg-muted-background px-1 sm:px-2 py-0.5 rounded\">\n                            {showPasswords[client.id] ? client.password : \"••••\"}\n                          </span>\n                          <button\n                            onClick={(e) => {\n                              e.stopPropagation()\n                              togglePasswordVisibility(client.id)\n                            }}\n                            className=\"text-muted hover:text-foreground\"\n                          >\n                            {showPasswords[client.id] ? (\n                              <EyeOff className=\"h-2.5 w-2.5 sm:h-3 sm:w-3\" />\n                            ) : (\n                              <Eye className=\"h-2.5 w-2.5 sm:h-3 sm:w-3\" />\n                            )}\n                          </button>\n                        </div>\n                        <div className=\"flex items-center gap-2 mt-1 flex-wrap\">\n                          <div className=\"flex items-center gap-1 bg-primary/20 px-1.5 sm:px-2 py-0.5 rounded text-[10px] sm:text-xs\">\n                            <Target className=\"h-2.5 w-2.5 sm:h-3 sm:w-3 text-primary\" />\n                            <span className=\"text-primary font-medium\">\n                              ₹{(client.targetAmount || 0).toLocaleString(\"en-IN\")}\n                            </span>\n                          </div>\n                          <div className=\"flex items-center gap-1 bg-yellow-500/20 px-1.5 sm:px-2 py-0.5 rounded text-[10px] sm:text-xs\">\n                            <IndianRupee className=\"h-2.5 w-2.5 sm:h-3 sm:w-3 text-yellow-400\" />\n                            <span className=\"text-yellow-400 font-medium\">\n                              Remaining: ₹{(client.remainingAmount || 0).toLocaleString(\"en-IN\")}\n                            </span>\n                          </div>\n                        </div>\n                      </div>\n                      <div className=\"flex items-center gap-1 sm:gap-2 ml-2\">\n                        <Button\n                          size=\"sm\"\n                          variant=\"outline\"\n                          onClick={(e) => {\n                            e.stopPropagation()\n                            setEditingTarget(client.id)\n                            setEditTargetValue(String(client.targetAmount || 0))\n                          }}\n                          className=\"text-primary border-primary/30 hover:bg-primary/20 hover:border-primary/50 text-[10px] sm:text-sm px-1.5 sm:px-3 py-1 sm:py-2 h-auto\"\n                        >\n                          <Edit2 className=\"h-3 w-3 sm:h-4 sm:w-4 sm:mr-1\" />\n                          <span className=\"hidden sm:inline\">Edit</span>\n                        </Button>\n                        <Button\n                          size=\"sm\"\n                          variant=\"outline\"\n                          onClick={(e) => {\n                            e.stopPropagation()\n                            handleDeleteClient(client.id, client.name)\n                          }}\n                          className=\"text-destructive border-destructive/30 hover:bg-destructive/20 hover:border-destructive/50 text-[10px] sm:text-sm px-1.5 sm:px-3 py-1 sm:py-2 h-auto\"\n                        >\n                          <Trash2 className=\"h-3 w-3 sm:h-4 sm:w-4 sm:mr-1\" />\n                          <span className=\"hidden sm:inline\">Remove</span>\n                        </Button>\n                      </div>\n                    </div>\n\n                    {isEditingThis && (\n                      <div\n                        className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-50\"\n                        onClick={() => setEditingTarget(null)}\n                      >\n                        <div\n                          className=\"bg-background border border-muted/30 rounded-lg p-4 sm:p-6 max-w-md w-full mx-4 shadow-xl\"\n                          onClick={(e) => e.stopPropagation()}\n                        >\n                          <div className=\"flex items-center gap-3 mb-4\">\n                            <div className=\"bg-primary/20 p-2 rounded-full\">\n                              <Target className=\"h-5 w-5 sm:h-6 sm:w-6 text-primary\" />\n                            </div>\n                            <h3 className=\"text-base sm:text-lg font-semibold text-foreground\">Update Target Amount</h3>\n                          </div>\n                          <p className=\"text-muted mb-2 text-sm\">\n                            Client: <span className=\"text-foreground font-medium\">{client.name}</span>\n                          </p>\n                          <div className=\"mb-4\">\n                            <label className=\"block text-xs sm:text-sm font-medium text-muted mb-1\">\n                              New Target Amount (₹)\n                            </label>\n                            <input\n                              type=\"number\"\n                              value={editTargetValue}\n                              onChange={(e) => setEditTargetValue(e.target.value)}\n                              className=\"w-full px-3 py-2 rounded bg-muted-background border border-muted/30 text-foreground text-sm\"\n                              min=\"1\"\n                              autoFocus\n                            />\n                          </div>\n                          <div className=\"flex gap-3 justify-end\">\n                            <Button variant=\"outline\" onClick={() => setEditingTarget(null)}>\n                              <X className=\"h-4 w-4 mr-1\" />\n                              Cancel\n                            </Button>\n                            <Button\n                              onClick={() => handleSaveTarget(client.id)}\n                              className=\"bg-primary hover:bg-primary/90\"\n                            >\n                              <Save className=\"h-4 w-4 mr-1\" />\n                              Save\n                            </Button>\n                          </div>\n                        </div>\n                      </div>\n                    )}\n\n                    {isExpanded && (\n                      <div className=\"border-t border-muted/20 bg-background/50 p-2 sm:p-4\">\n                        {/* Payment Statistics */}\n                        <div className=\"grid grid-cols-2 sm:grid-cols-5 gap-2 sm:gap-3 mb-3 sm:mb-4\">\n                          <div className=\"bg-primary/10 rounded-lg p-2 sm:p-3 text-center border border-primary/20\">\n                            <p className=\"text-[10px] sm:text-xs text-primary mb-1\">Target</p>\n                            <p className=\"text-xs sm:text-lg font-bold text-primary\">\n                              ₹{(client.targetAmount || 0).toLocaleString(\"en-IN\")}\n                            </p>\n                          </div>\n                          <div className=\"bg-yellow-500/10 rounded-lg p-2 sm:p-3 text-center border border-yellow-500/20\">\n                            <p className=\"text-[10px] sm:text-xs text-yellow-400 mb-1\">Remaining</p>\n                            <p className=\"text-xs sm:text-lg font-bold text-yellow-400\">\n                              ₹{(client.remainingAmount || 0).toLocaleString(\"en-IN\")}\n                            </p>\n                          </div>\n                          <div className=\"bg-green-500/10 rounded-lg p-2 sm:p-3 text-center border border-green-500/20\">\n                            <p className=\"text-[10px] sm:text-xs text-green-400 mb-1\">Approved</p>\n                            <p className=\"text-xs sm:text-lg font-bold text-green-400\">\n                              ₹{stats.approved.toLocaleString(\"en-IN\")}\n                            </p>\n                          </div>\n                          <div className=\"bg-orange-500/10 rounded-lg p-2 sm:p-3 text-center border border-orange-500/20\">\n                            <p className=\"text-[10px] sm:text-xs text-orange-400 mb-1\">Pending</p>\n                            <p className=\"text-xs sm:text-lg font-bold text-orange-400\">\n                              ₹{stats.pending.toLocaleString(\"en-IN\")}\n                            </p>\n                          </div>\n                          <div className=\"bg-red-500/10 rounded-lg p-2 sm:p-3 text-center border border-red-500/20\">\n                            <p className=\"text-[10px] sm:text-xs text-red-400 mb-1\">Rejected</p>\n                            <p className=\"text-xs sm:text-lg font-bold text-red-400\">\n                              ₹{stats.rejected.toLocaleString(\"en-IN\")}\n                            </p>\n                          </div>\n                        </div>\n\n                        {/* Payment List */}\n                        <h4 className=\"text-xs sm:text-sm font-medium text-foreground mb-2 sm:mb-3 flex items-center gap-2\">\n                          <FileText className=\"h-3 w-3 sm:h-4 sm:w-4\" />\n                          Payment History ({payments.length})\n                        </h4>\n                        {payments.length > 0 ? (\n                          <div className=\"space-y-2 max-h-60 sm:max-h-80 overflow-y-auto\">\n                            {payments\n                              .sort((a, b) => new Date(b.submittedAt).getTime() - new Date(a.submittedAt).getTime())\n                              .map((payment) => (\n                                <div\n                                  key={payment.id}\n                                  className=\"bg-muted-background/30 border border-muted/20 rounded-lg p-2 sm:p-3\"\n                                >\n                                  <div className=\"flex items-start justify-between gap-2 sm:gap-3\">\n                                    <div className=\"flex-1 min-w-0\">\n                                      <div className=\"flex items-center gap-2 mb-1 flex-wrap\">\n                                        <span className=\"font-semibold text-foreground flex items-center text-xs sm:text-base\">\n                                          <IndianRupee className=\"h-3 w-3 sm:h-4 sm:w-4\" />\n                                          {payment.amount.toLocaleString(\"en-IN\")}\n                                        </span>\n                                        <StatusBadge status={payment.status} />\n                                      </div>\n                                      <p className=\"text-[10px] sm:text-sm text-muted truncate\">\n                                        {payment.description}\n                                      </p>\n                                      <div className=\"flex items-center gap-2 sm:gap-3 mt-1 sm:mt-2 text-[10px] sm:text-xs text-muted flex-wrap\">\n                                        <span className=\"flex items-center gap-1\">\n                                          <Calendar className=\"h-2.5 w-2.5 sm:h-3 sm:w-3\" />\n                                          {new Date(payment.submittedAt).toLocaleDateString(\"en-IN\")}\n                                        </span>\n                                        {payment.reviewedAt && (\n                                          <span>Rev: {new Date(payment.reviewedAt).toLocaleDateString(\"en-IN\")}</span>\n                                        )}\n                                      </div>\n                                      {payment.ocrAmount && (\n                                        <p className=\"text-[10px] sm:text-xs text-muted mt-1\">\n                                          OCR: ₹{payment.ocrAmount.toLocaleString(\"en-IN\")}\n                                        </p>\n                                      )}\n                                      {payment.adminNotes && (\n                                        <div className=\"mt-1 sm:mt-2 p-1.5 sm:p-2 bg-muted-background/50 rounded text-[10px] sm:text-xs\">\n                                          <span className=\"text-muted\">Notes: </span>\n                                          <span className=\"text-foreground\">{payment.adminNotes}</span>\n                                        </div>\n                                      )}\n                                    </div>\n                                    {payment.proofUrl && (\n                                      <a\n                                        href={payment.proofUrl}\n                                        target=\"_blank\"\n                                        rel=\"noopener noreferrer\"\n                                        className=\"shrink-0 text-primary hover:text-primary/80 text-[10px] sm:text-xs underline\"\n                                      >\n                                        Proof\n                                      </a>\n                                    )}\n                                  </div>\n                                </div>\n                              ))}\n                          </div>\n                        ) : (\n                          <p className=\"text-[10px] sm:text-sm text-muted py-3 sm:py-4 text-center bg-muted-background/30 rounded\">\n                            No payments yet.\n                          </p>\n                        )}\n                      </div>\n                    )}\n                  </div>\n                )\n              })}\n            </div>\n          ) : (\n            <div className=\"text-center py-6 sm:py-8 bg-muted-background/30 rounded border border-muted/20\">\n              <Users className=\"h-8 w-8 sm:h-12 sm:w-12 text-muted mx-auto mb-2\" />\n              <p className=\"text-muted text-xs sm:text-sm\">No clients registered yet</p>\n              <p className=\"text-[10px] sm:text-xs text-muted mt-1\">\n                Click &quot;Add Client&quot; to register a new client\n              </p>\n            </div>\n          )}\n        </div>\n      </CardContent>\n    </Card>\n  )\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 3287, "column": 0}, "map": {"version":3,"sources":["file:///P:/payment_tracking_app/components/ui/progress.tsx"],"sourcesContent":["'use client'\n\nimport * as React from 'react'\nimport * as ProgressPrimitive from '@radix-ui/react-progress'\n\nimport { cn } from '@/lib/utils'\n\nfunction Progress({\n  className,\n  value,\n  ...props\n}: React.ComponentProps<typeof ProgressPrimitive.Root>) {\n  return (\n    <ProgressPrimitive.Root\n      data-slot=\"progress\"\n      className={cn(\n        'bg-primary/20 relative h-2 w-full overflow-hidden rounded-full',\n        className,\n      )}\n      {...props}\n    >\n      <ProgressPrimitive.Indicator\n        data-slot=\"progress-indicator\"\n        className=\"bg-primary h-full w-full flex-1 transition-all\"\n        style={{ transform: `translateX(-${100 - (value || 0)}%)` }}\n      />\n    </ProgressPrimitive.Root>\n  )\n}\n\nexport { Progress }\n"],"names":[],"mappings":";;;;;AAGA;AAEA;AALA;;;;AAOA,SAAS,SAAS,EAChB,SAAS,EACT,KAAK,EACL,GAAG,OACiD;IACpD,qBACE,qNAAC,uMAAsB;QACrB,aAAU;QACV,WAAW,IAAA,6IAAE,EACX,kEACA;QAED,GAAG,KAAK;kBAET,cAAA,qNAAC,4MAA2B;YAC1B,aAAU;YACV,WAAU;YACV,OAAO;gBAAE,WAAW,CAAC,YAAY,EAAE,MAAM,CAAC,SAAS,CAAC,EAAE,EAAE,CAAC;YAAC;;;;;;;;;;;AAIlE;KArBS"}},
    {"offset": {"line": 3331, "column": 0}, "map": {"version":3,"sources":["file:///P:/payment_tracking_app/components/ui/select.tsx"],"sourcesContent":["'use client'\n\nimport * as React from 'react'\nimport * as SelectPrimitive from '@radix-ui/react-select'\nimport { CheckIcon, ChevronDownIcon, ChevronUpIcon } from 'lucide-react'\n\nimport { cn } from '@/lib/utils'\n\nfunction Select({\n  ...props\n}: React.ComponentProps<typeof SelectPrimitive.Root>) {\n  return <SelectPrimitive.Root data-slot=\"select\" {...props} />\n}\n\nfunction SelectGroup({\n  ...props\n}: React.ComponentProps<typeof SelectPrimitive.Group>) {\n  return <SelectPrimitive.Group data-slot=\"select-group\" {...props} />\n}\n\nfunction SelectValue({\n  ...props\n}: React.ComponentProps<typeof SelectPrimitive.Value>) {\n  return <SelectPrimitive.Value data-slot=\"select-value\" {...props} />\n}\n\nfunction SelectTrigger({\n  className,\n  size = 'default',\n  children,\n  ...props\n}: React.ComponentProps<typeof SelectPrimitive.Trigger> & {\n  size?: 'sm' | 'default'\n}) {\n  return (\n    <SelectPrimitive.Trigger\n      data-slot=\"select-trigger\"\n      data-size={size}\n      className={cn(\n        \"border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4\",\n        className,\n      )}\n      {...props}\n    >\n      {children}\n      <SelectPrimitive.Icon asChild>\n        <ChevronDownIcon className=\"size-4 opacity-50\" />\n      </SelectPrimitive.Icon>\n    </SelectPrimitive.Trigger>\n  )\n}\n\nfunction SelectContent({\n  className,\n  children,\n  position = 'popper',\n  ...props\n}: React.ComponentProps<typeof SelectPrimitive.Content>) {\n  return (\n    <SelectPrimitive.Portal>\n      <SelectPrimitive.Content\n        data-slot=\"select-content\"\n        className={cn(\n          'bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md',\n          position === 'popper' &&\n            'data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1',\n          className,\n        )}\n        position={position}\n        {...props}\n      >\n        <SelectScrollUpButton />\n        <SelectPrimitive.Viewport\n          className={cn(\n            'p-1',\n            position === 'popper' &&\n              'h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1',\n          )}\n        >\n          {children}\n        </SelectPrimitive.Viewport>\n        <SelectScrollDownButton />\n      </SelectPrimitive.Content>\n    </SelectPrimitive.Portal>\n  )\n}\n\nfunction SelectLabel({\n  className,\n  ...props\n}: React.ComponentProps<typeof SelectPrimitive.Label>) {\n  return (\n    <SelectPrimitive.Label\n      data-slot=\"select-label\"\n      className={cn('text-muted-foreground px-2 py-1.5 text-xs', className)}\n      {...props}\n    />\n  )\n}\n\nfunction SelectItem({\n  className,\n  children,\n  ...props\n}: React.ComponentProps<typeof SelectPrimitive.Item>) {\n  return (\n    <SelectPrimitive.Item\n      data-slot=\"select-item\"\n      className={cn(\n        \"focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2\",\n        className,\n      )}\n      {...props}\n    >\n      <span className=\"absolute right-2 flex size-3.5 items-center justify-center\">\n        <SelectPrimitive.ItemIndicator>\n          <CheckIcon className=\"size-4\" />\n        </SelectPrimitive.ItemIndicator>\n      </span>\n      <SelectPrimitive.ItemText>{children}</SelectPrimitive.ItemText>\n    </SelectPrimitive.Item>\n  )\n}\n\nfunction SelectSeparator({\n  className,\n  ...props\n}: React.ComponentProps<typeof SelectPrimitive.Separator>) {\n  return (\n    <SelectPrimitive.Separator\n      data-slot=\"select-separator\"\n      className={cn('bg-border pointer-events-none -mx-1 my-1 h-px', className)}\n      {...props}\n    />\n  )\n}\n\nfunction SelectScrollUpButton({\n  className,\n  ...props\n}: React.ComponentProps<typeof SelectPrimitive.ScrollUpButton>) {\n  return (\n    <SelectPrimitive.ScrollUpButton\n      data-slot=\"select-scroll-up-button\"\n      className={cn(\n        'flex cursor-default items-center justify-center py-1',\n        className,\n      )}\n      {...props}\n    >\n      <ChevronUpIcon className=\"size-4\" />\n    </SelectPrimitive.ScrollUpButton>\n  )\n}\n\nfunction SelectScrollDownButton({\n  className,\n  ...props\n}: React.ComponentProps<typeof SelectPrimitive.ScrollDownButton>) {\n  return (\n    <SelectPrimitive.ScrollDownButton\n      data-slot=\"select-scroll-down-button\"\n      className={cn(\n        'flex cursor-default items-center justify-center py-1',\n        className,\n      )}\n      {...props}\n    >\n      <ChevronDownIcon className=\"size-4\" />\n    </SelectPrimitive.ScrollDownButton>\n  )\n}\n\nexport {\n  Select,\n  SelectContent,\n  SelectGroup,\n  SelectItem,\n  SelectLabel,\n  SelectScrollDownButton,\n  SelectScrollUpButton,\n  SelectSeparator,\n  SelectTrigger,\n  SelectValue,\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAGA;AACA;AAAA;AAAA;AAEA;AANA;;;;;AAQA,SAAS,OAAO,EACd,GAAG,OAC+C;IAClD,qBAAO,qNAAC,qMAAoB;QAAC,aAAU;QAAU,GAAG,KAAK;;;;;;AAC3D;KAJS;AAMT,SAAS,YAAY,EACnB,GAAG,OACgD;IACnD,qBAAO,qNAAC,sMAAqB;QAAC,aAAU;QAAgB,GAAG,KAAK;;;;;;AAClE;MAJS;AAMT,SAAS,YAAY,EACnB,GAAG,OACgD;IACnD,qBAAO,qNAAC,sMAAqB;QAAC,aAAU;QAAgB,GAAG,KAAK;;;;;;AAClE;MAJS;AAMT,SAAS,cAAc,EACrB,SAAS,EACT,OAAO,SAAS,EAChB,QAAQ,EACR,GAAG,OAGJ;IACC,qBACE,qNAAC,wMAAuB;QACtB,aAAU;QACV,aAAW;QACX,WAAW,IAAA,6IAAE,EACX,gzBACA;QAED,GAAG,KAAK;;YAER;0BACD,qNAAC,qMAAoB;gBAAC,OAAO;0BAC3B,cAAA,qNAAC,sQAAe;oBAAC,WAAU;;;;;;;;;;;;;;;;;AAInC;MAxBS;AA0BT,SAAS,cAAc,EACrB,SAAS,EACT,QAAQ,EACR,WAAW,QAAQ,EACnB,GAAG,OACkD;IACrD,qBACE,qNAAC,uMAAsB;kBACrB,cAAA,qNAAC,wMAAuB;YACtB,aAAU;YACV,WAAW,IAAA,6IAAE,EACX,ijBACA,aAAa,YACX,mIACF;YAEF,UAAU;YACT,GAAG,KAAK;;8BAET,qNAAC;;;;;8BACD,qNAAC,yMAAwB;oBACvB,WAAW,IAAA,6IAAE,EACX,OACA,aAAa,YACX;8BAGH;;;;;;8BAEH,qNAAC;;;;;;;;;;;;;;;;AAIT;MAjCS;AAmCT,SAAS,YAAY,EACnB,SAAS,EACT,GAAG,OACgD;IACnD,qBACE,qNAAC,sMAAqB;QACpB,aAAU;QACV,WAAW,IAAA,6IAAE,EAAC,6CAA6C;QAC1D,GAAG,KAAK;;;;;;AAGf;MAXS;AAaT,SAAS,WAAW,EAClB,SAAS,EACT,QAAQ,EACR,GAAG,OAC+C;IAClD,qBACE,qNAAC,qMAAoB;QACnB,aAAU;QACV,WAAW,IAAA,6IAAE,EACX,6aACA;QAED,GAAG,KAAK;;0BAET,qNAAC;gBAAK,WAAU;0BACd,cAAA,qNAAC,8MAA6B;8BAC5B,cAAA,qNAAC,gPAAS;wBAAC,WAAU;;;;;;;;;;;;;;;;0BAGzB,qNAAC,yMAAwB;0BAAE;;;;;;;;;;;;AAGjC;MAtBS;AAwBT,SAAS,gBAAgB,EACvB,SAAS,EACT,GAAG,OACoD;IACvD,qBACE,qNAAC,0MAAyB;QACxB,aAAU;QACV,WAAW,IAAA,6IAAE,EAAC,iDAAiD;QAC9D,GAAG,KAAK;;;;;;AAGf;MAXS;AAaT,SAAS,qBAAqB,EAC5B,SAAS,EACT,GAAG,OACyD;IAC5D,qBACE,qNAAC,+MAA8B;QAC7B,aAAU;QACV,WAAW,IAAA,6IAAE,EACX,wDACA;QAED,GAAG,KAAK;kBAET,cAAA,qNAAC,gQAAa;YAAC,WAAU;;;;;;;;;;;AAG/B;MAhBS;AAkBT,SAAS,uBAAuB,EAC9B,SAAS,EACT,GAAG,OAC2D;IAC9D,qBACE,qNAAC,iNAAgC;QAC/B,aAAU;QACV,WAAW,IAAA,6IAAE,EACX,wDACA;QAED,GAAG,KAAK;kBAET,cAAA,qNAAC,sQAAe;YAAC,WAAU;;;;;;;;;;;AAGjC;MAhBS"}},
    {"offset": {"line": 3588, "column": 0}, "map": {"version":3,"sources":["file:///P:/payment_tracking_app/components/admin/client-monthly-tracker.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport { useEffect, useMemo, useState } from \"react\"\r\nimport { useAuth } from \"@/lib/auth-context\"\r\nimport { getMonthlyAggregates, getPaymentsByClient } from \"@/lib/payment-store\"\r\nimport type { MonthlyAggregate, Payment } from \"@/lib/types\"\r\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\"\r\nimport { Progress } from \"@/components/ui/progress\"\r\nimport {\r\n  Select,\r\n  SelectContent,\r\n  SelectItem,\r\n  SelectTrigger,\r\n  SelectValue,\r\n} from \"@/components/ui/select\"\r\nimport { CalendarClock, CalendarRange, TrendingUp, CircleSlash, IndianRupee, Filter } from \"lucide-react\"\r\n\r\ntype RegisteredClient = ReturnType<ReturnType<typeof useAuth>[\"getClients\"]>[number]\r\n\r\ninterface ClientMonthlyData {\r\n  client: RegisteredClient\r\n  monthly: Array<MonthlyAggregate & { cumulative: number }>\r\n  lastPayment: Payment | null\r\n  totalApproved: number\r\n}\r\n\r\nfunction formatMonth(month: string) {\r\n  const [year, monthIndex] = month.split(\"-\").map(Number)\r\n  const date = new Date(year, (monthIndex || 1) - 1)\r\n  return date.toLocaleDateString(\"en-IN\", { month: \"short\", year: \"numeric\" })\r\n}\r\n\r\nfunction formatCurrency(value: number) {\r\n  return value.toLocaleString(\"en-IN\")\r\n}\r\n\r\nexport default function ClientMonthlyTracker() {\r\n  const { getClients } = useAuth()\r\n  const [clientMonthlyData, setClientMonthlyData] = useState<ClientMonthlyData[]>([])\r\n  const [selectedClient, setSelectedClient] = useState<string>(\"all\")\r\n  const [selectedMonth, setSelectedMonth] = useState<string>(\"all\")\r\n\r\n  useEffect(() => {\r\n    const load = async () => {\r\n      const clients = getClients()\r\n      const enriched = await Promise.all(\r\n        clients.map(async (client) => {\r\n          const [monthlyAggregates, clientPayments] = await Promise.all([\r\n            getMonthlyAggregates(client.id),\r\n            getPaymentsByClient(client.id),\r\n          ])\r\n          let cumulative = 0\r\n          const monthly = monthlyAggregates.map((entry) => {\r\n            cumulative += entry.amount\r\n            return { ...entry, cumulative }\r\n          })\r\n          const sortedPayments = clientPayments.sort(\r\n            (a, b) => new Date(b.submittedAt).getTime() - new Date(a.submittedAt).getTime(),\r\n          )\r\n          return {\r\n            client,\r\n            monthly,\r\n            lastPayment: sortedPayments[0] ?? null,\r\n            totalApproved: monthly.reduce((sum, entry) => sum + entry.amount, 0),\r\n          }\r\n        }),\r\n      )\r\n      setClientMonthlyData(enriched)\r\n    }\r\n\r\n    load()\r\n    const interval = setInterval(load, 3000)\r\n    return () => clearInterval(interval)\r\n  }, [getClients])\r\n\r\n  const clientsWithData = useMemo(\r\n    () => clientMonthlyData.sort((a, b) => a.client.name.localeCompare(b.client.name)),\r\n    [clientMonthlyData],\r\n  )\r\n\r\n  const monthOptions = useMemo(() => {\r\n    const months = new Set<string>()\r\n    clientMonthlyData.forEach(({ monthly }) => {\r\n      monthly.forEach((entry) => months.add(entry.month))\r\n    })\r\n    return Array.from(months).sort((a, b) => b.localeCompare(a))\r\n  }, [clientMonthlyData])\r\n\r\n  const clientOptions = useMemo(\r\n    () => clientMonthlyData.map(({ client }) => ({ id: client.id, name: client.name })).sort((a, b) => a.name.localeCompare(b.name)),\r\n    [clientMonthlyData],\r\n  )\r\n\r\n  const filteredClients = useMemo(() => {\r\n    return clientsWithData\r\n      .filter((entry) => (selectedClient === \"all\" ? true : entry.client.id === selectedClient))\r\n      .map((entry) => {\r\n        const monthly = selectedMonth === \"all\" ? entry.monthly : entry.monthly.filter((m) => m.month === selectedMonth)\r\n        const totalApproved =\r\n          selectedMonth === \"all\" ? entry.totalApproved : monthly.reduce((sum, monthEntry) => sum + monthEntry.amount, 0)\r\n\r\n        return {\r\n          ...entry,\r\n          monthly,\r\n          totalApproved,\r\n        }\r\n      })\r\n      .filter((entry) => {\r\n        if (selectedMonth === \"all\") return true\r\n        return entry.monthly.length > 0\r\n      })\r\n  }, [clientsWithData, selectedClient, selectedMonth])\r\n\r\n  if (!clientsWithData.length) {\r\n    return null\r\n  }\r\n\r\n  return (\r\n    <Card className=\"border-muted/30 bg-popover-foreground text-foreground\">\r\n      <CardHeader className=\"pb-4 space-y-3\">\r\n        <div>\r\n          <div className=\"flex items-center gap-2\">\r\n            <CalendarRange className=\"h-4 w-4 text-primary\" />\r\n            <CardTitle className=\"text-sm sm:text-lg\">Client Monthly Progress</CardTitle>\r\n          </div>\r\n          <p className=\"text-xs sm:text-sm text-muted\">\r\n            Track each client&apos;s approved amount month by month until their most recent payment.\r\n          </p>\r\n        </div>\r\n        <div className=\"flex flex-wrap gap-3 items-center\">\r\n          <div className=\"flex items-center gap-1 text-xs uppercase tracking-wide text-muted\">\r\n            <Filter className=\"h-3 w-3\" />\r\n            Filters\r\n          </div>\r\n          <Select value={selectedClient} onValueChange={setSelectedClient}>\r\n            <SelectTrigger size=\"sm\" className=\"min-w-[160px]\">\r\n              <SelectValue placeholder=\"Select client\" />\r\n            </SelectTrigger>\r\n            <SelectContent>\r\n              <SelectItem value=\"all\">All clients</SelectItem>\r\n              {clientOptions.map((client) => (\r\n                <SelectItem key={client.id} value={client.id}>\r\n                  {client.name}\r\n                </SelectItem>\r\n              ))}\r\n            </SelectContent>\r\n          </Select>\r\n          <Select value={selectedMonth} onValueChange={setSelectedMonth}>\r\n            <SelectTrigger size=\"sm\" className=\"min-w-[200px]\">\r\n              <SelectValue placeholder=\"Month & year\" />\r\n            </SelectTrigger>\r\n            <SelectContent>\r\n              <SelectItem value=\"all\">All months</SelectItem>\r\n              {monthOptions.map((month) => (\r\n                <SelectItem key={month} value={month}>\r\n                  {formatMonth(month)}\r\n                </SelectItem>\r\n              ))}\r\n            </SelectContent>\r\n          </Select>\r\n        </div>\r\n      </CardHeader>\r\n      <CardContent className=\"space-y-4\">\r\n        {filteredClients.length === 0 && (\r\n          <div className=\"text-xs text-muted bg-muted-background/30 border border-dashed border-muted/30 rounded-md p-4 text-center\">\r\n            No data matches the selected filters.\r\n          </div>\r\n        )}\r\n        {filteredClients.map(({ client, monthly, lastPayment, totalApproved }) => {\r\n          const target = client.targetAmount || 0\r\n          const remaining = client.remainingAmount ?? Math.max(0, target - totalApproved)\r\n          const progressValue = target > 0 ? Math.min(100, (totalApproved / target) * 100) : 0\r\n\r\n          return (\r\n            <div\r\n              key={client.id}\r\n              className=\"rounded-lg border border-muted/20 bg-background/60 p-3 sm:p-4 space-y-3 shadow-sm\"\r\n            >\r\n              <div className=\"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between\">\r\n                <div>\r\n                  <p className=\"text-sm sm:text-base font-semibold\">{client.name}</p>\r\n                  <p className=\"text-xs text-muted\">{client.email}</p>\r\n                  <div className=\"flex items-center gap-1 text-[11px] text-muted mt-1\">\r\n                    {lastPayment ? (\r\n                      <>\r\n                        <CalendarClock className=\"h-3 w-3\" />\r\n                        Last payment: {new Date(lastPayment.submittedAt).toLocaleDateString(\"en-IN\")}\r\n                      </>\r\n                    ) : (\r\n                      <>\r\n                        <CircleSlash className=\"h-3 w-3\" />\r\n                        No payments yet\r\n                      </>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n                <div className=\"text-right space-y-1\">\r\n                  <p className=\"text-xs text-muted\">Target</p>\r\n                  <p className=\"text-sm sm:text-base font-semibold\">\r\n                    ₹{target ? formatCurrency(target) : formatCurrency(0)}\r\n                  </p>\r\n                  <p className=\"text-xs text-muted\">Remaining ₹{formatCurrency(remaining)}</p>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"space-y-2\">\r\n                <div className=\"flex items-center justify-between text-xs text-muted\">\r\n                  <span className=\"flex items-center gap-1\">\r\n                    <TrendingUp className=\"h-3 w-3\" />\r\n                    Overall progress\r\n                  </span>\r\n                  <span>\r\n                    ₹{formatCurrency(totalApproved)} / ₹{formatCurrency(target)}\r\n                  </span>\r\n                </div>\r\n                <Progress value={progressValue} className=\"h-2\" />\r\n              </div>\r\n\r\n              {monthly.length > 0 ? (\r\n                <div className=\"space-y-2\">\r\n                  {monthly.map((entry) => {\r\n                    const monthProgress = target > 0 ? Math.min(100, (entry.cumulative / target) * 100) : 0\r\n                    return (\r\n                      <div\r\n                        key={`${client.id}-${entry.month}`}\r\n                        className=\"rounded-md border border-muted/10 bg-muted-background/40 p-2 sm:p-3\"\r\n                      >\r\n                        <div className=\"flex items-center justify-between text-xs sm:text-sm font-medium\">\r\n                          <span>{formatMonth(entry.month)}</span>\r\n                          <span className=\"flex items-center gap-1\">\r\n                            <IndianRupee className=\"h-3 w-3\" />\r\n                            {formatCurrency(entry.amount)}\r\n                          </span>\r\n                        </div>\r\n                        <div className=\"mt-1 flex flex-col gap-1\">\r\n                          <Progress value={monthProgress} className=\"h-1.5\" />\r\n                          <p className=\"text-[10px] sm:text-xs text-muted\">\r\n                            Cumulative: ₹{formatCurrency(entry.cumulative)} / ₹{formatCurrency(target)}\r\n                          </p>\r\n                        </div>\r\n                      </div>\r\n                    )\r\n                  })}\r\n                </div>\r\n              ) : (\r\n                <div className=\"text-xs text-muted bg-muted-background/30 border border-dashed border-muted/30 rounded-md p-3 flex items-center gap-2\">\r\n                  <CircleSlash className=\"h-3 w-3\" />\r\n                  No approved payments to show yet.\r\n                </div>\r\n              )}\r\n            </div>\r\n          )\r\n        })}\r\n      </CardContent>\r\n    </Card>\r\n  )\r\n}\r\n\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 4232, "column": 0}, "map": {"version":3,"sources":["file:///P:/payment_tracking_app/app/admin/dashboard/page.tsx"],"sourcesContent":["\"use client\"\n\nimport type { Payment } from \"@/lib/types\"\nimport { getPayments, subscribeToPayments } from \"@/lib/payment-store\"\nimport { useEffect, useState } from \"react\"\nimport PaymentReviewCard from \"@/components/admin/payment-review-card\"\nimport PaymentStats from \"@/components/admin/payment-stats\"\nimport ClientManagement from \"@/components/admin/client-management\"\nimport ClientMonthlyTracker from \"@/components/admin/client-monthly-tracker\"\nimport { Button } from \"@/components/ui/button\"\n\nexport default function AdminDashboard() {\n  const [payments, setPayments] = useState<Payment[]>([])\n  const [filter, setFilter] = useState<Payment[\"status\"] | \"all\">(\"all\")\n  const [showMonthlyTracker, setShowMonthlyTracker] = useState(false)\n\n  useEffect(() => {\n    const loadPayments = async () => {\n      const allPayments = await getPayments()\n      setPayments(allPayments)\n    }\n\n    loadPayments()\n\n    // Use subscription for real-time updates (works with both Firebase and localStorage)\n    const unsubscribe = subscribeToPayments((allPayments) => {\n      setPayments(allPayments)\n    })\n\n    // Fallback polling for localStorage mode\n    const interval = setInterval(() => {\n      loadPayments()\n    }, 2000)\n\n    return () => {\n      unsubscribe()\n      clearInterval(interval)\n    }\n  }, [])\n\n  const filteredPayments = filter === \"all\" ? payments : payments.filter((p) => p.status === filter)\n\n  const stats = {\n    pending: payments.filter((p) => p.status === \"pending\").length,\n    approved: payments.filter((p) => p.status === \"approved\").length,\n    rejected: payments.filter((p) => p.status === \"rejected\").length,\n    total: payments.length,\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      <ClientManagement />\n\n      <PaymentStats stats={stats} onFilterChange={setFilter} activeFilter={filter} />\n\n      <div className=\"flex justify-end\">\n        <Button\n          variant={showMonthlyTracker ? \"secondary\" : \"outline\"}\n          onClick={() => setShowMonthlyTracker((prev) => !prev)}\n          className=\"text-xs sm:text-sm\"\n        >\n          {showMonthlyTracker ? \"Hide\" : \"Show\"} Client Monthly Progress\n        </Button>\n      </div>\n\n      {showMonthlyTracker && <ClientMonthlyTracker />}\n\n      <div className=\"space-y-4\">\n        <div className=\"flex items-center gap-2 flex-wrap\">\n          <span className=\"text-sm font-medium text-muted\">Filter:</span>\n          {([\"all\", \"pending\", \"approved\", \"rejected\"] as const).map((s) => (\n            <button\n              key={s}\n              onClick={() => setFilter(s)}\n              className={`px-3 py-1 rounded text-sm font-medium transition-colors ${\n                filter === s\n                  ? \"bg-primary text-primary-foreground\"\n                  : \"bg-muted-background text-muted hover:bg-muted-background/80\"\n              }`}\n            >\n              {s.charAt(0).toUpperCase() + s.slice(1)}\n            </button>\n          ))}\n        </div>\n\n        <div className=\"grid gap-4\">\n          {filteredPayments.length > 0 ? (\n            filteredPayments.map((payment) => (\n              <PaymentReviewCard\n                key={payment.id}\n                payment={payment}\n                onUpdate={async () => {\n                  const updatedPayments = await getPayments()\n                  setPayments(updatedPayments)\n                }}\n              />\n            ))\n          ) : (\n            <div className=\"text-center py-12 bg-muted-background rounded border border-muted/30\">\n              <p className=\"text-muted\">No payments to review</p>\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  )\n}\n"],"names":[],"mappings":";;;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;;;AATA;;;;;;;;AAWe,SAAS;;IACtB,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,iMAAQ,EAAY,EAAE;IACtD,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,iMAAQ,EAA4B;IAChE,MAAM,CAAC,oBAAoB,sBAAsB,GAAG,IAAA,iMAAQ,EAAC;IAE7D,IAAA,kMAAS;oCAAC;YACR,MAAM;yDAAe;oBACnB,MAAM,cAAc,MAAM,IAAA,iKAAW;oBACrC,YAAY;gBACd;;YAEA;YAEA,qFAAqF;YACrF,MAAM,cAAc,IAAA,yKAAmB;wDAAC,CAAC;oBACvC,YAAY;gBACd;;YAEA,yCAAyC;YACzC,MAAM,WAAW;qDAAY;oBAC3B;gBACF;oDAAG;YAEH;4CAAO;oBACL;oBACA,cAAc;gBAChB;;QACF;mCAAG,EAAE;IAEL,MAAM,mBAAmB,WAAW,QAAQ,WAAW,SAAS,MAAM,CAAC,CAAC,IAAM,EAAE,MAAM,KAAK;IAE3F,MAAM,QAAQ;QACZ,SAAS,SAAS,MAAM,CAAC,CAAC,IAAM,EAAE,MAAM,KAAK,WAAW,MAAM;QAC9D,UAAU,SAAS,MAAM,CAAC,CAAC,IAAM,EAAE,MAAM,KAAK,YAAY,MAAM;QAChE,UAAU,SAAS,MAAM,CAAC,CAAC,IAAM,EAAE,MAAM,KAAK,YAAY,MAAM;QAChE,OAAO,SAAS,MAAM;IACxB;IAEA,qBACE,qNAAC;QAAI,WAAU;;0BACb,qNAAC,kLAAgB;;;;;0BAEjB,qNAAC,8KAAY;gBAAC,OAAO;gBAAO,gBAAgB;gBAAW,cAAc;;;;;;0BAErE,qNAAC;gBAAI,WAAU;0BACb,cAAA,qNAAC,gKAAM;oBACL,SAAS,qBAAqB,cAAc;oBAC5C,SAAS,IAAM,sBAAsB,CAAC,OAAS,CAAC;oBAChD,WAAU;;wBAET,qBAAqB,SAAS;wBAAO;;;;;;;;;;;;YAIzC,oCAAsB,qNAAC,0LAAoB;;;;;0BAE5C,qNAAC;gBAAI,WAAU;;kCACb,qNAAC;wBAAI,WAAU;;0CACb,qNAAC;gCAAK,WAAU;0CAAiC;;;;;;4BAC/C;gCAAC;gCAAO;gCAAW;gCAAY;6BAAW,CAAW,GAAG,CAAC,CAAC,kBAC1D,qNAAC;oCAEC,SAAS,IAAM,UAAU;oCACzB,WAAW,CAAC,wDAAwD,EAClE,WAAW,IACP,uCACA,+DACJ;8CAED,EAAE,MAAM,CAAC,GAAG,WAAW,KAAK,EAAE,KAAK,CAAC;mCARhC;;;;;;;;;;;kCAaX,qNAAC;wBAAI,WAAU;kCACZ,iBAAiB,MAAM,GAAG,IACzB,iBAAiB,GAAG,CAAC,CAAC,wBACpB,qNAAC,uLAAiB;gCAEhB,SAAS;gCACT,UAAU;oCACR,MAAM,kBAAkB,MAAM,IAAA,iKAAW;oCACzC,YAAY;gCACd;+BALK,QAAQ,EAAE;;;;sDASnB,qNAAC;4BAAI,WAAU;sCACb,cAAA,qNAAC;gCAAE,WAAU;0CAAa;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAOxC;GA/FwB;KAAA"}}]
}
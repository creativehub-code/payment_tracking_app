{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///P:/payment_tracking_app/lib/config.ts"],"sourcesContent":["// Configuration to enable/disable Firebase\r\n// Set to true to use Firebase, false to use localStorage\r\nexport const USE_FIREBASE = process.env.NEXT_PUBLIC_USE_FIREBASE === \"true\"\r\n\r\n// Check if Firebase config is available\r\nexport const FIREBASE_AVAILABLE = !!(\r\n  process.env.NEXT_PUBLIC_FIREBASE_API_KEY &&\r\n  process.env.NEXT_PUBLIC_FIREBASE_PROJECT_ID\r\n)\r\n\r\n// Determine if we should use Firebase\r\nexport const IS_FIREBASE_ENABLED = USE_FIREBASE && FIREBASE_AVAILABLE\r\n\r\n"],"names":[],"mappings":"AAAA,2CAA2C;AAC3C,yDAAyD;;;;;;;;;AAC7B;AAArB,MAAM,eAAe,6CAAyC;AAG9D,MAAM,qBAAqB,CAAC,CAAC,CAClC,qIAEF;AAGO,MAAM,sBAAsB,gBAAgB"}},
    {"offset": {"line": 25, "column": 0}, "map": {"version":3,"sources":["file:///P:/payment_tracking_app/lib/firebase/config.ts"],"sourcesContent":["import { initializeApp, getApps, FirebaseApp } from \"firebase/app\"\r\nimport { getAuth, Auth } from \"firebase/auth\"\r\nimport { getFirestore, Firestore } from \"firebase/firestore\"\r\nimport { getStorage, FirebaseStorage } from \"firebase/storage\"\r\n\r\n// Check if Firebase config is available (not placeholder values)\r\nconst hasFirebaseConfig = !!(\r\n  process.env.NEXT_PUBLIC_FIREBASE_API_KEY &&\r\n  process.env.NEXT_PUBLIC_FIREBASE_PROJECT_ID &&\r\n  process.env.NEXT_PUBLIC_FIREBASE_API_KEY !== \"your_api_key_here\" &&\r\n  process.env.NEXT_PUBLIC_FIREBASE_PROJECT_ID !== \"your-project-id\" &&\r\n  process.env.NEXT_PUBLIC_FIREBASE_API_KEY.trim() !== \"\" &&\r\n  process.env.NEXT_PUBLIC_FIREBASE_PROJECT_ID.trim() !== \"\"\r\n)\r\n\r\nconst firebaseConfig = hasFirebaseConfig\r\n  ? {\r\n      apiKey: process.env.NEXT_PUBLIC_FIREBASE_API_KEY,\r\n      authDomain: process.env.NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN,\r\n      projectId: process.env.NEXT_PUBLIC_FIREBASE_PROJECT_ID,\r\n      storageBucket: process.env.NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET,\r\n      messagingSenderId: process.env.NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID,\r\n      appId: process.env.NEXT_PUBLIC_FIREBASE_APP_ID,\r\n    }\r\n  : null\r\n\r\n// Initialize Firebase only if config is available\r\nlet app: FirebaseApp | null = null\r\nlet auth: Auth | null = null\r\nlet db: Firestore | null = null\r\nlet storage: FirebaseStorage | null = null\r\n\r\nif (hasFirebaseConfig && firebaseConfig) {\r\n  try {\r\n    if (getApps().length === 0) {\r\n      app = initializeApp(firebaseConfig)\r\n    } else {\r\n      app = getApps()[0]\r\n    }\r\n\r\n    // Initialize Firebase services\r\n    auth = getAuth(app)\r\n    db = getFirestore(app)\r\n    storage = getStorage(app)\r\n  } catch (error) {\r\n    console.error(\"Firebase initialization error:\", error)\r\n    // Set to null if initialization fails\r\n    app = null\r\n    auth = null\r\n    db = null\r\n    storage = null\r\n  }\r\n}\r\n\r\n// Export with null checks - components should check if these are null before using\r\nexport { auth, db, storage }\r\nexport default app\r\n\r\n"],"names":[],"mappings":";;;;;;;;;;AAOE;AAPF;AAAA;AACA;AAAA;AACA;AAAA;AACA;AAAA;;;;;AAEA,iEAAiE;AACjE,MAAM,oBAAoB,CAAC,CAAC,CAC1B,yIAEA,gFAA6C,uBAC7C,2DAAgD,qBAChD,4EAAyC,IAAI,OAAO,MACpD,uDAA4C,IAAI,OAAO,EACzD;AAEA,MAAM,iBAAiB,oBACnB;IACE,MAAM;IACN,UAAU;IACV,SAAS;IACT,aAAa;IACb,iBAAiB;IACjB,KAAK;AACP,IACA;AAEJ,kDAAkD;AAClD,IAAI,MAA0B;AAC9B,IAAI,OAAoB;AACxB,IAAI,KAAuB;AAC3B,IAAI,UAAkC;AAEtC,IAAI,qBAAqB,gBAAgB;IACvC,IAAI;QACF,IAAI,IAAA,sMAAO,IAAG,MAAM,KAAK,GAAG;YAC1B,MAAM,IAAA,4MAAa,EAAC;QACtB,OAAO;YACL,MAAM,IAAA,sMAAO,GAAE,CAAC,EAAE;QACpB;QAEA,+BAA+B;QAC/B,OAAO,IAAA,gMAAO,EAAC;QACf,KAAK,IAAA,0MAAY,EAAC;QAClB,UAAU,IAAA,sMAAU,EAAC;IACvB,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,kCAAkC;QAChD,sCAAsC;QACtC,MAAM;QACN,OAAO;QACP,KAAK;QACL,UAAU;IACZ;AACF;;uCAIe"}},
    {"offset": {"line": 92, "column": 0}, "map": {"version":3,"sources":["file:///P:/payment_tracking_app/lib/firebase/payments.ts"],"sourcesContent":["import {\r\n  collection,\r\n  doc,\r\n  getDoc,\r\n  getDocs,\r\n  addDoc,\r\n  updateDoc,\r\n  deleteDoc,\r\n  query,\r\n  where,\r\n  orderBy,\r\n  onSnapshot,\r\n  Timestamp,\r\n  type DocumentData,\r\n} from \"firebase/firestore\"\r\nimport { db } from \"./config\"\r\n\r\n// Helper to check if Firebase is available\r\nfunction checkFirebaseAvailable(): void {\r\n  if (!db) {\r\n    throw new Error(\"Firebase is not initialized. Please check your Firebase configuration in .env.local\")\r\n  }\r\n}\r\nimport type { Payment, MonthlyAggregate } from \"../types\"\r\n\r\nconst PAYMENTS_COLLECTION = \"payments\"\r\n\r\n// Convert Firestore timestamp to ISO string\r\nconst timestampToISO = (timestamp: any): string => {\r\n  if (timestamp?.toDate) {\r\n    return timestamp.toDate().toISOString()\r\n  }\r\n  if (timestamp instanceof Timestamp) {\r\n    return timestamp.toDate().toISOString()\r\n  }\r\n  return timestamp || new Date().toISOString()\r\n}\r\n\r\n// Convert Payment to Firestore document\r\nconst paymentToFirestore = (payment: Payment): DocumentData => {\r\n  return {\r\n    ...payment,\r\n    submittedAt: Timestamp.fromDate(new Date(payment.submittedAt)),\r\n    reviewedAt: payment.reviewedAt ? Timestamp.fromDate(new Date(payment.reviewedAt)) : null,\r\n    approvedAt: payment.approvedAt ? Timestamp.fromDate(new Date(payment.approvedAt)) : null,\r\n  }\r\n}\r\n\r\n// Convert Firestore document to Payment\r\nconst firestoreToPayment = (doc: DocumentData): Payment => {\r\n  const data = doc.data()\r\n  return {\r\n    ...data,\r\n    id: doc.id,\r\n    submittedAt: timestampToISO(data.submittedAt),\r\n    reviewedAt: data.reviewedAt ? timestampToISO(data.reviewedAt) : undefined,\r\n    approvedAt: data.approvedAt ? timestampToISO(data.approvedAt) : undefined,\r\n  } as Payment\r\n}\r\n\r\nexport async function getPayments(): Promise<Payment[]> {\r\n  try {\r\n    checkFirebaseAvailable()\r\n    const paymentsRef = collection(db!, PAYMENTS_COLLECTION)\r\n    const q = query(paymentsRef, orderBy(\"submittedAt\", \"desc\"))\r\n    const querySnapshot = await getDocs(q)\r\n    return querySnapshot.docs.map(firestoreToPayment)\r\n  } catch (error) {\r\n    console.error(\"Error getting payments:\", error)\r\n    return []\r\n  }\r\n}\r\n\r\nexport async function getPayment(id: string): Promise<Payment | null> {\r\n  try {\r\n    checkFirebaseAvailable()\r\n    const paymentRef = doc(db!, PAYMENTS_COLLECTION, id)\r\n    const paymentSnap = await getDoc(paymentRef)\r\n    if (paymentSnap.exists()) {\r\n      return firestoreToPayment(paymentSnap)\r\n    }\r\n    return null\r\n  } catch (error) {\r\n    console.error(\"Error getting payment:\", error)\r\n    return null\r\n  }\r\n}\r\n\r\nexport async function savePayment(payment: Payment): Promise<void> {\r\n  try {\r\n    checkFirebaseAvailable()\r\n    if (payment.id && payment.id.startsWith(\"payment_\")) {\r\n      // Update existing payment\r\n      const paymentRef = doc(db!, PAYMENTS_COLLECTION, payment.id)\r\n      const { id, ...paymentData } = payment\r\n      await updateDoc(paymentRef, paymentToFirestore(paymentData) as any)\r\n    } else {\r\n      // Create new payment\r\n      const { id, ...paymentData } = payment\r\n      const newId = id || `payment_${Date.now()}`\r\n      const paymentRef = doc(db, PAYMENTS_COLLECTION, newId)\r\n      await updateDoc(paymentRef, { ...paymentToFirestore(paymentData), id: newId } as any)\r\n    }\r\n    } catch (error) {\r\n    // If update fails, try to create new document\r\n    try {\r\n      checkFirebaseAvailable()\r\n      const paymentsRef = collection(db!, PAYMENTS_COLLECTION)\r\n      const { id, ...paymentData } = payment\r\n      const newId = id || `payment_${Date.now()}`\r\n      await addDoc(paymentsRef, { ...paymentToFirestore(paymentData), id: newId })\r\n    } catch (addError) {\r\n      console.error(\"Error saving payment:\", addError)\r\n      throw addError\r\n    }\r\n  }\r\n}\r\n\r\nexport async function deletePayment(id: string): Promise<void> {\r\n  try {\r\n    checkFirebaseAvailable()\r\n    const paymentRef = doc(db!, PAYMENTS_COLLECTION, id)\r\n    await deleteDoc(paymentRef)\r\n  } catch (error) {\r\n    console.error(\"Error deleting payment:\", error)\r\n    throw error\r\n  }\r\n}\r\n\r\nexport async function getPaymentsByClient(clientId: string): Promise<Payment[]> {\r\n  try {\r\n    checkFirebaseAvailable()\r\n    const paymentsRef = collection(db!, PAYMENTS_COLLECTION)\r\n    // Use where only (no orderBy) to avoid index requirement, then sort in memory\r\n    const q = query(paymentsRef, where(\"clientId\", \"==\", clientId))\r\n    const querySnapshot = await getDocs(q)\r\n    const payments = querySnapshot.docs.map(firestoreToPayment)\r\n    // Sort by submittedAt descending in memory\r\n    return payments.sort((a, b) => new Date(b.submittedAt).getTime() - new Date(a.submittedAt).getTime())\r\n  } catch (error: any) {\r\n    console.error(\"Error getting payments by client:\", error)\r\n    // If it's an index error, try fallback method\r\n    if (error?.code === \"failed-precondition\" && error?.message?.includes(\"index\")) {\r\n      console.warn(\"Index error detected, trying fallback method...\")\r\n      try {\r\n        // Fallback: Get all payments and filter in memory\r\n        const paymentsRef = collection(db!, PAYMENTS_COLLECTION)\r\n        const querySnapshot = await getDocs(paymentsRef)\r\n        const allPayments = querySnapshot.docs.map(firestoreToPayment)\r\n        const filtered = allPayments.filter((p) => p.clientId === clientId)\r\n        return filtered.sort((a, b) => new Date(b.submittedAt).getTime() - new Date(a.submittedAt).getTime())\r\n      } catch (fallbackError) {\r\n        console.error(\"Fallback method also failed:\", fallbackError)\r\n      }\r\n    }\r\n    return []\r\n  }\r\n}\r\n\r\nexport async function getPaymentsByStatus(status: Payment[\"status\"]): Promise<Payment[]> {\r\n  try {\r\n    checkFirebaseAvailable()\r\n    const paymentsRef = collection(db!, PAYMENTS_COLLECTION)\r\n    // Use where only (no orderBy) to avoid index requirement, then sort in memory\r\n    const q = query(paymentsRef, where(\"status\", \"==\", status))\r\n    const querySnapshot = await getDocs(q)\r\n    const payments = querySnapshot.docs.map(firestoreToPayment)\r\n    // Sort by submittedAt descending in memory\r\n    return payments.sort((a, b) => new Date(b.submittedAt).getTime() - new Date(a.submittedAt).getTime())\r\n  } catch (error: any) {\r\n    console.error(\"Error getting payments by status:\", error)\r\n    // If it's an index error, try fallback method\r\n    if (error?.code === \"failed-precondition\" && error?.message?.includes(\"index\")) {\r\n      console.warn(\"Index error detected, trying fallback method...\")\r\n      try {\r\n        // Fallback: Get all payments and filter in memory\r\n        const paymentsRef = collection(db!, PAYMENTS_COLLECTION)\r\n        const querySnapshot = await getDocs(paymentsRef)\r\n        const allPayments = querySnapshot.docs.map(firestoreToPayment)\r\n        const filtered = allPayments.filter((p) => p.status === status)\r\n        return filtered.sort((a, b) => new Date(b.submittedAt).getTime() - new Date(a.submittedAt).getTime())\r\n      } catch (fallbackError) {\r\n        console.error(\"Fallback method also failed:\", fallbackError)\r\n      }\r\n    }\r\n    return []\r\n  }\r\n}\r\n\r\nexport function subscribeToPayments(\r\n  callback: (payments: Payment[]) => void,\r\n  clientId?: string,\r\n  status?: Payment[\"status\"],\r\n): () => void {\r\n  try {\r\n    if (!db) {\r\n      console.warn(\"Firebase not initialized, subscription disabled\")\r\n      return () => {}\r\n    }\r\n    const paymentsRef = collection(db, PAYMENTS_COLLECTION)\r\n    \r\n    // Build query without orderBy to avoid index requirement\r\n    // We'll sort in memory instead\r\n    let q: any\r\n    if (clientId && status) {\r\n      // For multiple filters, we need to get all and filter in memory\r\n      q = query(paymentsRef)\r\n    } else if (clientId) {\r\n      q = query(paymentsRef, where(\"clientId\", \"==\", clientId))\r\n    } else if (status) {\r\n      q = query(paymentsRef, where(\"status\", \"==\", status))\r\n    } else {\r\n      q = query(paymentsRef)\r\n    }\r\n\r\n    const unsubscribe = onSnapshot(\r\n      q,\r\n      (snapshot) => {\r\n        let payments = snapshot.docs.map(firestoreToPayment)\r\n        \r\n        // Apply filters in memory if needed\r\n        if (clientId) {\r\n          payments = payments.filter((p) => p.clientId === clientId)\r\n        }\r\n        if (status) {\r\n          payments = payments.filter((p) => p.status === status)\r\n        }\r\n        \r\n        // Sort by submittedAt descending in memory\r\n        payments.sort((a, b) => new Date(b.submittedAt).getTime() - new Date(a.submittedAt).getTime())\r\n        \r\n        callback(payments)\r\n      },\r\n      (error: any) => {\r\n        console.error(\"Error subscribing to payments:\", error)\r\n        // If it's an index error, try fallback: subscribe to all and filter in memory\r\n        if (error?.code === \"failed-precondition\" && error?.message?.includes(\"index\")) {\r\n          console.warn(\"Index error in subscription, using fallback method...\")\r\n          const fallbackQ = query(paymentsRef)\r\n          return onSnapshot(\r\n            fallbackQ,\r\n            (snapshot) => {\r\n              let payments = snapshot.docs.map(firestoreToPayment)\r\n              if (clientId) payments = payments.filter((p) => p.clientId === clientId)\r\n              if (status) payments = payments.filter((p) => p.status === status)\r\n              payments.sort((a, b) => new Date(b.submittedAt).getTime() - new Date(a.submittedAt).getTime())\r\n              callback(payments)\r\n            },\r\n            (fallbackError) => {\r\n              console.error(\"Fallback subscription also failed:\", fallbackError)\r\n              callback([])\r\n            },\r\n          )\r\n        }\r\n        callback([])\r\n      },\r\n    )\r\n\r\n    return unsubscribe\r\n  } catch (error) {\r\n    console.error(\"Error setting up payment subscription:\", error)\r\n    return () => {}\r\n  }\r\n}\r\n\r\nexport async function getMonthlyAggregates(clientId: string): Promise<MonthlyAggregate[]> {\r\n  try {\r\n    const payments = await getPaymentsByClient(clientId)\r\n    const approvedPayments = payments.filter((p) => p.status === \"approved\")\r\n\r\n    const monthMap = new Map<string, Payment[]>()\r\n\r\n    approvedPayments.forEach((payment) => {\r\n      const date = new Date(payment.approvedAt || payment.submittedAt)\r\n      const month = date.toISOString().slice(0, 7) // YYYY-MM format\r\n\r\n      if (!monthMap.has(month)) {\r\n        monthMap.set(month, [])\r\n      }\r\n      monthMap.get(month)!.push(payment)\r\n    })\r\n\r\n    return Array.from(monthMap.entries())\r\n      .map(([month, monthPayments]) => ({\r\n        month,\r\n        amount: monthPayments.reduce((sum, p) => sum + p.amount, 0),\r\n        payments: monthPayments,\r\n      }))\r\n      .sort((a, b) => a.month.localeCompare(b.month))\r\n  } catch (error) {\r\n    console.error(\"Error getting monthly aggregates:\", error)\r\n    return []\r\n  }\r\n}\r\n\r\nexport async function getPaymentsByMonthAndClient(clientId: string, month: string): Promise<Payment[]> {\r\n  try {\r\n    const payments = await getPaymentsByClient(clientId)\r\n    return payments\r\n      .filter((p) => p.status === \"approved\")\r\n      .filter((p) => {\r\n        const date = new Date(p.approvedAt || p.submittedAt)\r\n        return date.toISOString().slice(0, 7) === month\r\n      })\r\n  } catch (error) {\r\n    console.error(\"Error getting payments by month and client:\", error)\r\n    return []\r\n  }\r\n}\r\n\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 383, "column": 0}, "map": {"version":3,"sources":["file:///P:/payment_tracking_app/lib/payment-store.ts"],"sourcesContent":["import type { Payment, Client, MonthlyAggregate, ClientSummary } from \"./types\"\nimport { IS_FIREBASE_ENABLED } from \"./config\"\nimport * as firebasePayments from \"./firebase/payments\"\n\nconst STORAGE_KEY = \"paymentTracker_payments\"\nconst CLIENTS_STORAGE_KEY = \"paymentTracker_clients\"\n\n// localStorage implementations\nfunction getPaymentsLocal(): Payment[] {\n  if (typeof window === \"undefined\") return []\n  const stored = localStorage.getItem(STORAGE_KEY)\n  return stored ? JSON.parse(stored) : []\n}\n\nfunction savePaymentLocal(payment: Payment): void {\n  if (typeof window === \"undefined\") return\n  const payments = getPaymentsLocal()\n  const existing = payments.findIndex((p) => p.id === payment.id)\n  if (existing >= 0) {\n    payments[existing] = payment\n  } else {\n    payments.push(payment)\n  }\n  localStorage.setItem(STORAGE_KEY, JSON.stringify(payments))\n}\n\nfunction deletePaymentLocal(id: string): void {\n  if (typeof window === \"undefined\") return\n  const payments = getPaymentsLocal().filter((p) => p.id !== id)\n  localStorage.setItem(STORAGE_KEY, JSON.stringify(payments))\n}\n\n// Unified API - uses Firebase if enabled, otherwise localStorage\nexport async function getPayments(): Promise<Payment[]> {\n  if (IS_FIREBASE_ENABLED) {\n    return await firebasePayments.getPayments()\n  }\n  return getPaymentsLocal()\n}\n\n// For backward compatibility, provide sync version that returns empty array if Firebase is enabled\nexport function getPaymentsSync(): Payment[] {\n  if (!IS_FIREBASE_ENABLED) {\n    return getPaymentsLocal()\n  }\n  return [] // Firebase is async, so return empty for sync calls\n}\n\nexport async function savePayment(payment: Payment): Promise<void> {\n  if (IS_FIREBASE_ENABLED) {\n    await firebasePayments.savePayment(payment)\n  } else {\n    savePaymentLocal(payment)\n  }\n}\n\nexport async function deletePayment(id: string): Promise<void> {\n  if (IS_FIREBASE_ENABLED) {\n    await firebasePayments.deletePayment(id)\n  } else {\n    deletePaymentLocal(id)\n  }\n}\n\nexport async function getPaymentsByClient(clientId: string): Promise<Payment[]> {\n  if (IS_FIREBASE_ENABLED) {\n    return await firebasePayments.getPaymentsByClient(clientId)\n  }\n  return getPaymentsLocal().filter((p) => p.clientId === clientId)\n}\n\nexport function getPaymentsByClientSync(clientId: string): Payment[] {\n  if (!IS_FIREBASE_ENABLED) {\n    return getPaymentsLocal().filter((p) => p.clientId === clientId)\n  }\n  return []\n}\n\nexport async function getPaymentsByStatus(status: Payment[\"status\"]): Promise<Payment[]> {\n  if (IS_FIREBASE_ENABLED) {\n    return await firebasePayments.getPaymentsByStatus(status)\n  }\n  return getPaymentsLocal().filter((p) => p.status === status)\n}\n\nexport function getClientByPayment(payment: Payment): Client | null {\n  const stored = localStorage.getItem(CLIENTS_STORAGE_KEY)\n  if (!stored) {\n    // Generate a default client\n    return {\n      id: payment.clientId,\n      name: `Client ${payment.clientId.slice(0, 8)}`,\n      targetAmount: 10000,\n    }\n  }\n  const clients: Client[] = JSON.parse(stored)\n  return clients.find((c) => c.id === payment.clientId) || null\n}\n\nexport function getClientsStore(): Client[] {\n  if (typeof window === \"undefined\") return []\n  const stored = localStorage.getItem(CLIENTS_STORAGE_KEY)\n  return stored ? JSON.parse(stored) : []\n}\n\nexport async function getMonthlyAggregates(clientId: string): Promise<MonthlyAggregate[]> {\n  if (IS_FIREBASE_ENABLED) {\n    return await firebasePayments.getMonthlyAggregates(clientId)\n  }\n\n  const payments = await getPaymentsByClient(clientId)\n  const approvedPayments = payments.filter((p) => p.status === \"approved\")\n\n  const monthMap = new Map<string, Payment[]>()\n\n  approvedPayments.forEach((payment) => {\n    const date = new Date(payment.approvedAt || payment.submittedAt)\n    const month = date.toISOString().slice(0, 7) // YYYY-MM format\n\n    if (!monthMap.has(month)) {\n      monthMap.set(month, [])\n    }\n    monthMap.get(month)!.push(payment)\n  })\n\n  return Array.from(monthMap.entries())\n    .map(([month, monthPayments]) => ({\n      month,\n      amount: monthPayments.reduce((sum, p) => sum + p.amount, 0),\n      payments: monthPayments,\n    }))\n    .sort((a, b) => a.month.localeCompare(b.month))\n}\n\n// Sync version for backward compatibility\nexport function getMonthlyAggregatesSync(clientId: string): MonthlyAggregate[] {\n  if (IS_FIREBASE_ENABLED) {\n    return [] // Firebase is async\n  }\n\n  const payments = getPaymentsByClientSync(clientId).filter((p) => p.status === \"approved\")\n  const monthMap = new Map<string, Payment[]>()\n\n  payments.forEach((payment) => {\n    const date = new Date(payment.approvedAt || payment.submittedAt)\n    const month = date.toISOString().slice(0, 7)\n\n    if (!monthMap.has(month)) {\n      monthMap.set(month, [])\n    }\n    monthMap.get(month)!.push(payment)\n  })\n\n  return Array.from(monthMap.entries())\n    .map(([month, monthPayments]) => ({\n      month,\n      amount: monthPayments.reduce((sum, p) => sum + p.amount, 0),\n      payments: monthPayments,\n    }))\n    .sort((a, b) => a.month.localeCompare(b.month))\n}\n\nexport async function getClientSummary(clientId: string): Promise<ClientSummary> {\n  const client = getClientByPayment({ clientId } as Payment) || { id: clientId, name: \"Unknown\", targetAmount: 10000 }\n  const payments = await getPaymentsByClient(clientId)\n  const approvedPayments = payments.filter((p) => p.status === \"approved\")\n  const totalApproved = approvedPayments.reduce((sum, p) => sum + p.amount, 0)\n\n  const monthlyData = await getMonthlyAggregates(clientId)\n  let cumulativeTotal = 0\n  let targetReachedMonth: string | undefined\n\n  for (const monthly of monthlyData) {\n    cumulativeTotal += monthly.amount\n    if (cumulativeTotal >= client.targetAmount && !targetReachedMonth) {\n      targetReachedMonth = monthly.month\n    }\n  }\n\n  return {\n    targetAmount: client.targetAmount,\n    totalApproved,\n    remaining: Math.max(0, client.targetAmount - totalApproved),\n    targetReachedMonth,\n  }\n}\n\n// Sync version for backward compatibility (only works with localStorage)\nexport function getClientSummarySync(clientId: string): ClientSummary {\n  if (IS_FIREBASE_ENABLED) {\n    // Return default values if Firebase is enabled (async version should be used)\n    return {\n      targetAmount: 0,\n      totalApproved: 0,\n      remaining: 0,\n    }\n  }\n\n  const client = getClientByPayment({ clientId } as Payment) || { id: clientId, name: \"Unknown\", targetAmount: 10000 }\n  const payments = getPaymentsByClientSync(clientId).filter((p) => p.status === \"approved\")\n  const totalApproved = payments.reduce((sum, p) => sum + p.amount, 0)\n\n  const monthlyData = getMonthlyAggregatesSync(clientId)\n  let cumulativeTotal = 0\n  let targetReachedMonth: string | undefined\n\n  for (const monthly of monthlyData) {\n    cumulativeTotal += monthly.amount\n    if (cumulativeTotal >= client.targetAmount && !targetReachedMonth) {\n      targetReachedMonth = monthly.month\n    }\n  }\n\n  return {\n    targetAmount: client.targetAmount,\n    totalApproved,\n    remaining: Math.max(0, client.targetAmount - totalApproved),\n    targetReachedMonth,\n  }\n}\n\nexport async function getPaymentsByMonthAndClient(clientId: string, month: string): Promise<Payment[]> {\n  if (IS_FIREBASE_ENABLED) {\n    return await firebasePayments.getPaymentsByMonthAndClient(clientId, month)\n  }\n\n  const payments = await getPaymentsByClient(clientId)\n  return payments\n    .filter((p) => p.status === \"approved\")\n    .filter((p) => {\n      const date = new Date(p.approvedAt || p.submittedAt)\n      return date.toISOString().slice(0, 7) === month\n    })\n}\n\n// Export Firebase subscription function\nexport function subscribeToPayments(\n  callback: (payments: Payment[]) => void,\n  clientId?: string,\n  status?: Payment[\"status\"],\n): () => void {\n  if (IS_FIREBASE_ENABLED) {\n    return firebasePayments.subscribeToPayments(callback, clientId, status)\n  }\n  // For localStorage, just call callback with current data\n  getPayments().then((payments) => {\n    let filtered = payments\n    if (clientId) filtered = filtered.filter((p) => p.clientId === clientId)\n    if (status) filtered = filtered.filter((p) => p.status === status)\n    callback(filtered)\n  })\n  return () => {} // Return empty unsubscribe function\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 645, "column": 0}, "map": {"version":3,"sources":["file:///P:/payment_tracking_app/lib/ocr-utils.ts"],"sourcesContent":["export function extractAmountFromText(text: string): number | null {\n  const patterns = [\n    /₹\\s*(\\d+(?:[,]\\d{3})*(?:[.]\\d{2})?)/gi,\n    /(\\d+(?:[,]\\d{3})*(?:[.]\\d{2}))\\s*(?:INR|rupees?|₹)/gi,\n    /total[:\\s]+₹?\\s*(\\d+(?:[,]\\d{3})*(?:[.]\\d{2})?)/gi,\n    /amount[:\\s]+₹?\\s*(\\d+(?:[,]\\d{3})*(?:[.]\\d{2})?)/gi,\n    /price[:\\s]+₹?\\s*(\\d+(?:[,]\\d{3})*(?:[.]\\d{2})?)/gi,\n    /payment[:\\s]+₹?\\s*(\\d+(?:[,]\\d{3})*(?:[.]\\d{2})?)/gi,\n  ]\n\n  for (const pattern of patterns) {\n    const matches = text.matchAll(pattern)\n    for (const match of matches) {\n      if (match[1]) {\n        // Extract the captured group (the number part)\n        let numberStr = match[1]\n        // Remove commas (Indian number format: 1,250.00)\n        numberStr = numberStr.replace(/,/g, \"\")\n        // Parse as float\n        const amount = Number.parseFloat(numberStr)\n        if (!isNaN(amount) && amount > 0) {\n          return amount\n        }\n      }\n    }\n  }\n\n  // Fallback: try to find any number with currency symbol\n  const fallbackPattern = /₹\\s*([\\d,]+(?:\\.\\d{2})?)/gi\n  const fallbackMatch = text.match(fallbackPattern)\n  if (fallbackMatch) {\n    let numberStr = fallbackMatch[0].replace(/₹\\s*/gi, \"\").replace(/,/g, \"\")\n    const amount = Number.parseFloat(numberStr)\n    if (!isNaN(amount) && amount > 0) {\n      return amount\n    }\n  }\n\n  return null\n}\n\nexport async function processPaymentProof(fileData: string): Promise<{ text: string; amount: number | null }> {\n  return new Promise((resolve) => {\n    setTimeout(() => {\n      const mockText = \"Invoice Date: 2025-01-15\\nTotal Amount: ₹1,250.00\\nDescription: Equipment payment\"\n      const amount = extractAmountFromText(mockText)\n\n      resolve({\n        text: mockText,\n        amount,\n      })\n    }, 1000)\n  })\n}\n"],"names":[],"mappings":";;;;;;AAAO,SAAS,sBAAsB,IAAY;IAChD,MAAM,WAAW;QACf;QACA;QACA;QACA;QACA;QACA;KACD;IAED,KAAK,MAAM,WAAW,SAAU;QAC9B,MAAM,UAAU,KAAK,QAAQ,CAAC;QAC9B,KAAK,MAAM,SAAS,QAAS;YAC3B,IAAI,KAAK,CAAC,EAAE,EAAE;gBACZ,+CAA+C;gBAC/C,IAAI,YAAY,KAAK,CAAC,EAAE;gBACxB,iDAAiD;gBACjD,YAAY,UAAU,OAAO,CAAC,MAAM;gBACpC,iBAAiB;gBACjB,MAAM,SAAS,OAAO,UAAU,CAAC;gBACjC,IAAI,CAAC,MAAM,WAAW,SAAS,GAAG;oBAChC,OAAO;gBACT;YACF;QACF;IACF;IAEA,wDAAwD;IACxD,MAAM,kBAAkB;IACxB,MAAM,gBAAgB,KAAK,KAAK,CAAC;IACjC,IAAI,eAAe;QACjB,IAAI,YAAY,aAAa,CAAC,EAAE,CAAC,OAAO,CAAC,UAAU,IAAI,OAAO,CAAC,MAAM;QACrE,MAAM,SAAS,OAAO,UAAU,CAAC;QACjC,IAAI,CAAC,MAAM,WAAW,SAAS,GAAG;YAChC,OAAO;QACT;IACF;IAEA,OAAO;AACT;AAEO,eAAe,oBAAoB,QAAgB;IACxD,OAAO,IAAI,QAAQ,CAAC;QAClB,WAAW;YACT,MAAM,WAAW;YACjB,MAAM,SAAS,sBAAsB;YAErC,QAAQ;gBACN,MAAM;gBACN;YACF;QACF,GAAG;IACL;AACF"}},
    {"offset": {"line": 707, "column": 0}, "map": {"version":3,"sources":["file:///P:/payment_tracking_app/components/client/payment-submission-form.tsx"],"sourcesContent":["\"use client\"\n\nimport type React from \"react\"\nimport { processPaymentProof } from \"@/lib/ocr-utils\"\nimport { useAuth } from \"@/lib/auth-context\"\nimport { savePayment } from \"@/lib/payment-store\"\nimport type { Payment } from \"@/lib/types\"\nimport { useState, useRef } from \"react\"\n\ninterface PaymentSubmissionFormProps {\n  onSubmit: () => void\n}\n\nexport default function PaymentSubmissionForm({ onSubmit }: PaymentSubmissionFormProps) {\n  const { user } = useAuth()\n  const fileInputRef = useRef<HTMLInputElement>(null)\n  const [formData, setFormData] = useState({\n    amount: \"\",\n    description: \"payment\",\n  })\n  const [fileName, setFileName] = useState<string>(\"\")\n  const [fileData, setFileData] = useState<string>(\"\")\n  const [isSubmitting, setIsSubmitting] = useState(false)\n  const [isProcessingOCR, setIsProcessingOCR] = useState(false)\n  const [ocrResult, setOcrResult] = useState<{\n    amount: number | null\n    text: string\n  } | null>(null)\n\n  const handleFileChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const file = e.target.files?.[0]\n    if (file) {\n      setFileName(file.name)\n      const reader = new FileReader()\n      reader.onload = async (event) => {\n        const result = event.target?.result as string\n        setFileData(result)\n\n        setIsProcessingOCR(true)\n        try {\n          const ocr = await processPaymentProof(result)\n          setOcrResult(ocr)\n\n          if (ocr.amount && !formData.amount) {\n            setFormData((prev) => ({\n              ...prev,\n              amount: ocr.amount!.toString(),\n            }))\n          }\n        } catch (error) {\n          console.error(\"[v0] OCR processing error:\", error)\n        } finally {\n          setIsProcessingOCR(false)\n        }\n      }\n      reader.readAsDataURL(file)\n    }\n  }\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault()\n    if (!user?.id || !formData.amount || !formData.description) {\n      alert(\"Please fill in all fields\")\n      return\n    }\n\n    setIsSubmitting(true)\n\n    try {\n      const payment: Payment = {\n        id: `payment_${Date.now()}`,\n        clientId: user.id,\n        amount: Number.parseFloat(formData.amount),\n        description: formData.description,\n        proofUrl: fileData || undefined,\n        ocrAmount: ocrResult?.amount || undefined,\n        status: \"pending\",\n        submittedAt: new Date().toISOString(),\n      }\n\n      await savePayment(payment)\n\n      setFormData({ amount: \"\", description: \"payment\" })\n      setFileName(\"\")\n      setFileData(\"\")\n      setOcrResult(null)\n      if (fileInputRef.current) {\n        fileInputRef.current.value = \"\"\n      }\n\n      onSubmit()\n      alert(\"Payment submitted successfully!\")\n    } catch (error) {\n      console.error(\"[v0] Error submitting payment:\", error)\n      alert(\"Failed to submit payment\")\n    } finally {\n      setIsSubmitting(false)\n    }\n  }\n\n  return (\n    <form onSubmit={handleSubmit} className=\"space-y-4 bg-muted-background/30 border border-muted/30 rounded p-6\">\n      <h2 className=\"text-lg font-semibold text-foreground\">Submit Payment Proof</h2>\n\n      <div>\n        <label className=\"block text-sm font-medium text-foreground mb-2\">Amount</label>\n        <input\n          type=\"number\"\n          step=\"0.01\"\n          min=\"0\"\n          value={formData.amount}\n          onChange={(e) => setFormData({ ...formData, amount: e.target.value })}\n          placeholder=\"0.00\"\n          className=\"w-full px-3 py-2 rounded\"\n          required\n        />\n        {ocrResult?.amount && (\n          <p className=\"text-xs text-muted mt-1\">OCR detected: ₹{ocrResult.amount.toLocaleString(\"en-IN\")}</p>\n        )}\n      </div>\n\n      <div>\n        <label className=\"block text-sm font-medium text-foreground mb-2\">Description</label>\n        <textarea\n          value={formData.description}\n          onChange={(e) => setFormData({ ...formData, description: e.target.value })}\n          placeholder=\"e.g., Invoice payment, Equipment purchase\"\n          className=\"w-full px-3 py-2 rounded resize-none h-20\"\n          required\n        />\n      </div>\n\n      <div>\n        <label className=\"block text-sm font-medium text-foreground mb-2\">Proof Document</label>\n        <div className=\"flex items-center gap-3\">\n          <input ref={fileInputRef} type=\"file\" onChange={handleFileChange} accept=\"image/*,.pdf\" className=\"hidden\" />\n          <button\n            type=\"button\"\n            onClick={() => fileInputRef.current?.click()}\n            className=\"px-4 py-2 rounded bg-muted-background border border-muted hover:bg-muted-background/80 text-foreground text-sm\"\n          >\n            Choose File\n          </button>\n          {fileName && <span className=\"text-sm text-muted\">{fileName}</span>}\n          {isProcessingOCR && <span className=\"text-xs text-primary animate-pulse\">Processing with OCR...</span>}\n        </div>\n      </div>\n\n      <button\n        type=\"submit\"\n        disabled={isSubmitting}\n        className=\"w-full py-2 px-4 rounded bg-primary text-primary-foreground font-medium hover:opacity-90 disabled:opacity-50 transition-opacity\"\n      >\n        {isSubmitting ? \"Submitting...\" : \"Submit Payment\"}\n      </button>\n    </form>\n  )\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 981, "column": 0}, "map": {"version":3,"sources":["file:///P:/payment_tracking_app/components/client/payment-history-card.tsx"],"sourcesContent":["\"use client\"\n\nimport type { Payment } from \"@/lib/types\"\n\ninterface PaymentHistoryCardProps {\n  payment: Payment\n}\n\nexport default function PaymentHistoryCard({ payment }: PaymentHistoryCardProps) {\n  return (\n    <div className=\"border border-muted/30 rounded p-4 bg-muted-background/30 space-y-3\">\n      <div className=\"flex items-start justify-between\">\n        <div>\n          <p className=\"text-lg font-semibold text-foreground\">${payment.amount.toFixed(2)}</p>\n          <p className=\"text-sm text-muted\">{payment.description}</p>\n        </div>\n        <span\n          className={`px-3 py-1 rounded text-sm font-medium whitespace-nowrap ${\n            payment.status === \"pending\"\n              ? \"bg-warning/20 text-warning\"\n              : payment.status === \"approved\"\n                ? \"bg-success/20 text-success\"\n                : \"bg-destructive/20 text-destructive\"\n          }`}\n        >\n          {payment.status.charAt(0).toUpperCase() + payment.status.slice(1)}\n        </span>\n      </div>\n\n      <div className=\"grid grid-cols-2 gap-4 text-sm pt-2 border-t border-muted/30\">\n        <div>\n          <p className=\"text-muted mb-1\">Submitted</p>\n          <p className=\"text-foreground\">{new Date(payment.submittedAt).toLocaleDateString()}</p>\n        </div>\n        {payment.reviewedAt && (\n          <div>\n            <p className=\"text-muted mb-1\">Reviewed</p>\n            <p className=\"text-foreground\">{new Date(payment.reviewedAt).toLocaleDateString()}</p>\n          </div>\n        )}\n      </div>\n\n      {payment.adminNotes && (\n        <div className=\"bg-background/50 border border-muted/30 rounded p-3 text-sm\">\n          <p className=\"text-muted mb-1\">Admin Notes</p>\n          <p className=\"text-foreground\">{payment.adminNotes}</p>\n        </div>\n      )}\n\n      {payment.proofUrl && (\n        <a\n          href={payment.proofUrl}\n          target=\"_blank\"\n          rel=\"noopener noreferrer\"\n          className=\"text-primary hover:underline text-sm inline-block\"\n        >\n          View Proof Document\n        </a>\n      )}\n    </div>\n  )\n}\n"],"names":[],"mappings":";;;;;AAAA;;AAQe,SAAS,mBAAmB,EAAE,OAAO,EAA2B;IAC7E,qBACE,qNAAC;QAAI,WAAU;;0BACb,qNAAC;gBAAI,WAAU;;kCACb,qNAAC;;0CACC,qNAAC;gCAAE,WAAU;;oCAAwC;oCAAE,QAAQ,MAAM,CAAC,OAAO,CAAC;;;;;;;0CAC9E,qNAAC;gCAAE,WAAU;0CAAsB,QAAQ,WAAW;;;;;;;;;;;;kCAExD,qNAAC;wBACC,WAAW,CAAC,wDAAwD,EAClE,QAAQ,MAAM,KAAK,YACf,+BACA,QAAQ,MAAM,KAAK,aACjB,+BACA,sCACN;kCAED,QAAQ,MAAM,CAAC,MAAM,CAAC,GAAG,WAAW,KAAK,QAAQ,MAAM,CAAC,KAAK,CAAC;;;;;;;;;;;;0BAInE,qNAAC;gBAAI,WAAU;;kCACb,qNAAC;;0CACC,qNAAC;gCAAE,WAAU;0CAAkB;;;;;;0CAC/B,qNAAC;gCAAE,WAAU;0CAAmB,IAAI,KAAK,QAAQ,WAAW,EAAE,kBAAkB;;;;;;;;;;;;oBAEjF,QAAQ,UAAU,kBACjB,qNAAC;;0CACC,qNAAC;gCAAE,WAAU;0CAAkB;;;;;;0CAC/B,qNAAC;gCAAE,WAAU;0CAAmB,IAAI,KAAK,QAAQ,UAAU,EAAE,kBAAkB;;;;;;;;;;;;;;;;;;YAKpF,QAAQ,UAAU,kBACjB,qNAAC;gBAAI,WAAU;;kCACb,qNAAC;wBAAE,WAAU;kCAAkB;;;;;;kCAC/B,qNAAC;wBAAE,WAAU;kCAAmB,QAAQ,UAAU;;;;;;;;;;;;YAIrD,QAAQ,QAAQ,kBACf,qNAAC;gBACC,MAAM,QAAQ,QAAQ;gBACtB,QAAO;gBACP,KAAI;gBACJ,WAAU;0BACX;;;;;;;;;;;;AAMT;KArDwB"}},
    {"offset": {"line": 1146, "column": 0}, "map": {"version":3,"sources":["file:///P:/payment_tracking_app/components/client/monthly-progress-card.tsx"],"sourcesContent":["\"use client\"\n\nimport type { MonthlyAggregate, ClientSummary } from \"@/lib/types\"\nimport { BarChart, Bar, XAxis, YAxis, CartesianGrid, Tooltip, ResponsiveContainer } from \"recharts\"\nimport { useState } from \"react\"\n\ninterface MonthlyProgressCardProps {\n  summary: ClientSummary\n  monthlyData: MonthlyAggregate[]\n  targetAmount: number\n}\n\nexport default function MonthlyProgressCard({ summary, monthlyData, targetAmount }: MonthlyProgressCardProps) {\n  const [selectedMonth, setSelectedMonth] = useState<string | null>(null)\n  const selectedPayments = selectedMonth ? monthlyData.find((m) => m.month === selectedMonth)?.payments || [] : []\n\n  const chartData = monthlyData.map((m) => ({\n    month: new Date(m.month + \"-01\").toLocaleDateString(\"en-US\", { month: \"short\", year: \"numeric\" }),\n    amount: m.amount,\n    monthKey: m.month,\n  }))\n\n  return (\n    <div className=\"space-y-4\">\n      {/* Monthly Chart */}\n      {chartData.length > 0 ? (\n        <div className=\"border border-muted/30 rounded p-4 bg-muted-background/10\">\n          <h4 className=\"text-sm font-semibold text-foreground mb-4\">Monthly Breakdown</h4>\n          <ResponsiveContainer width=\"100%\" height={250}>\n            <BarChart data={chartData}>\n              <CartesianGrid strokeDasharray=\"3 3\" stroke=\"var(--color-muted)\" />\n              <XAxis dataKey=\"month\" stroke=\"var(--color-muted)\" fontSize={12} />\n              <YAxis stroke=\"var(--color-muted)\" fontSize={12} />\n              <Tooltip\n                contentStyle={{\n                  backgroundColor: \"var(--color-background)\",\n                  border: \"1px solid var(--color-muted)\",\n                  borderRadius: \"8px\",\n                }}\n                formatter={(value) => `₹${value.toLocaleString()}`}\n              />\n              <Bar\n                dataKey=\"amount\"\n                fill=\"var(--color-primary)\"\n                onClick={(data) => setSelectedMonth(data.payload.monthKey)}\n                cursor=\"pointer\"\n              />\n            </BarChart>\n          </ResponsiveContainer>\n          <p className=\"text-xs text-muted mt-2\">Click a bar to view payments for that month</p>\n        </div>\n      ) : (\n        <div className=\"text-center py-8 bg-muted-background/10 rounded border border-muted/30\">\n          <p className=\"text-muted\">No approved payments yet</p>\n        </div>\n      )}\n\n      {/* Drill-down */}\n      {selectedMonth && selectedPayments.length > 0 && (\n        <div className=\"border border-muted/30 rounded p-4 bg-muted-background/10\">\n          <h4 className=\"text-sm font-semibold text-foreground mb-4\">\n            Payments for{\" \"}\n            {new Date(selectedMonth + \"-01\").toLocaleDateString(\"en-US\", { month: \"long\", year: \"numeric\" })}\n          </h4>\n          <div className=\"space-y-3 max-h-64 overflow-y-auto\">\n            {selectedPayments.map((payment) => (\n              <div key={payment.id} className=\"bg-background border border-muted/30 rounded p-3\">\n                <div className=\"flex items-center justify-between\">\n                  <div>\n                    <p className=\"font-semibold text-foreground\">₹{payment.amount.toLocaleString()}</p>\n                    <p className=\"text-xs text-muted\">\n                      {new Date(payment.approvedAt || payment.submittedAt).toLocaleString(\"en-US\", {\n                        month: \"short\",\n                        day: \"numeric\",\n                        hour: \"2-digit\",\n                        minute: \"2-digit\",\n                      })}\n                    </p>\n                  </div>\n                  {payment.proofUrl && (\n                    <a\n                      href={payment.proofUrl}\n                      target=\"_blank\"\n                      rel=\"noopener noreferrer\"\n                      className=\"text-primary hover:underline text-xs\"\n                    >\n                      View\n                    </a>\n                  )}\n                </div>\n              </div>\n            ))}\n          </div>\n        </div>\n      )}\n    </div>\n  )\n}\n"],"names":[],"mappings":";;;;;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;;;AAJA;;;AAYe,SAAS,oBAAoB,EAAE,OAAO,EAAE,WAAW,EAAE,YAAY,EAA4B;;IAC1G,MAAM,CAAC,eAAe,iBAAiB,GAAG,IAAA,iMAAQ,EAAgB;IAClE,MAAM,mBAAmB,gBAAgB,YAAY,IAAI,CAAC,CAAC,IAAM,EAAE,KAAK,KAAK,gBAAgB,YAAY,EAAE,GAAG,EAAE;IAEhH,MAAM,YAAY,YAAY,GAAG,CAAC,CAAC,IAAM,CAAC;YACxC,OAAO,IAAI,KAAK,EAAE,KAAK,GAAG,OAAO,kBAAkB,CAAC,SAAS;gBAAE,OAAO;gBAAS,MAAM;YAAU;YAC/F,QAAQ,EAAE,MAAM;YAChB,UAAU,EAAE,KAAK;QACnB,CAAC;IAED,qBACE,qNAAC;QAAI,WAAU;;YAEZ,UAAU,MAAM,GAAG,kBAClB,qNAAC;gBAAI,WAAU;;kCACb,qNAAC;wBAAG,WAAU;kCAA6C;;;;;;kCAC3D,qNAAC,qNAAmB;wBAAC,OAAM;wBAAO,QAAQ;kCACxC,cAAA,qNAAC,2LAAQ;4BAAC,MAAM;;8CACd,qNAAC,yMAAa;oCAAC,iBAAgB;oCAAM,QAAO;;;;;;8CAC5C,qNAAC,yLAAK;oCAAC,SAAQ;oCAAQ,QAAO;oCAAqB,UAAU;;;;;;8CAC7D,qNAAC,yLAAK;oCAAC,QAAO;oCAAqB,UAAU;;;;;;8CAC7C,qNAAC,6LAAO;oCACN,cAAc;wCACZ,iBAAiB;wCACjB,QAAQ;wCACR,cAAc;oCAChB;oCACA,WAAW,CAAC,QAAU,CAAC,CAAC,EAAE,MAAM,cAAc,IAAI;;;;;;8CAEpD,qNAAC,qLAAG;oCACF,SAAQ;oCACR,MAAK;oCACL,SAAS,CAAC,OAAS,iBAAiB,KAAK,OAAO,CAAC,QAAQ;oCACzD,QAAO;;;;;;;;;;;;;;;;;kCAIb,qNAAC;wBAAE,WAAU;kCAA0B;;;;;;;;;;;qCAGzC,qNAAC;gBAAI,WAAU;0BACb,cAAA,qNAAC;oBAAE,WAAU;8BAAa;;;;;;;;;;;YAK7B,iBAAiB,iBAAiB,MAAM,GAAG,mBAC1C,qNAAC;gBAAI,WAAU;;kCACb,qNAAC;wBAAG,WAAU;;4BAA6C;4BAC5C;4BACZ,IAAI,KAAK,gBAAgB,OAAO,kBAAkB,CAAC,SAAS;gCAAE,OAAO;gCAAQ,MAAM;4BAAU;;;;;;;kCAEhG,qNAAC;wBAAI,WAAU;kCACZ,iBAAiB,GAAG,CAAC,CAAC,wBACrB,qNAAC;gCAAqB,WAAU;0CAC9B,cAAA,qNAAC;oCAAI,WAAU;;sDACb,qNAAC;;8DACC,qNAAC;oDAAE,WAAU;;wDAAgC;wDAAE,QAAQ,MAAM,CAAC,cAAc;;;;;;;8DAC5E,qNAAC;oDAAE,WAAU;8DACV,IAAI,KAAK,QAAQ,UAAU,IAAI,QAAQ,WAAW,EAAE,cAAc,CAAC,SAAS;wDAC3E,OAAO;wDACP,KAAK;wDACL,MAAM;wDACN,QAAQ;oDACV;;;;;;;;;;;;wCAGH,QAAQ,QAAQ,kBACf,qNAAC;4CACC,MAAM,QAAQ,QAAQ;4CACtB,QAAO;4CACP,KAAI;4CACJ,WAAU;sDACX;;;;;;;;;;;;+BAnBG,QAAQ,EAAE;;;;;;;;;;;;;;;;;;;;;;AA+BlC;GArFwB;KAAA"}},
    {"offset": {"line": 1390, "column": 0}, "map": {"version":3,"sources":["file:///P:/payment_tracking_app/app/client/portal/page.tsx"],"sourcesContent":["\"use client\"\n\nimport { useAuth } from \"@/lib/auth-context\"\nimport { getPaymentsByClient, getMonthlyAggregates } from \"@/lib/payment-store\"\nimport type { Payment, MonthlyAggregate } from \"@/lib/types\"\nimport { useEffect, useState } from \"react\"\nimport PaymentSubmissionForm from \"@/components/client/payment-submission-form\"\nimport PaymentHistoryCard from \"@/components/client/payment-history-card\"\nimport MonthlyProgressCard from \"@/components/client/monthly-progress-card\"\nimport { Target, IndianRupee, TrendingDown } from \"lucide-react\"\n\nexport default function ClientPortal() {\n  const { user, getClientById } = useAuth()\n  const [payments, setPayments] = useState<Payment[]>([])\n  const [clientInfo, setClientInfo] = useState<{ targetAmount: number; remainingAmount: number } | null>(null)\n  const [monthlyData, setMonthlyData] = useState<MonthlyAggregate[]>([])\n\n  useEffect(() => {\n    if (user?.id) {\n      const loadData = async () => {\n        const [clientPayments, monthly] = await Promise.all([\n          getPaymentsByClient(user.id),\n          getMonthlyAggregates(user.id),\n        ])\n        setPayments(clientPayments)\n        setMonthlyData(monthly)\n\n        const client = getClientById(user.id)\n        if (client) {\n          setClientInfo({\n            targetAmount: client.targetAmount,\n            remainingAmount: client.remainingAmount,\n          })\n        }\n      }\n\n      loadData()\n\n      const interval = setInterval(async () => {\n        const [clientPayments, monthly] = await Promise.all([\n          getPaymentsByClient(user.id),\n          getMonthlyAggregates(user.id),\n        ])\n        setPayments(clientPayments)\n        setMonthlyData(monthly)\n        const updatedClient = getClientById(user.id)\n        if (updatedClient) {\n          setClientInfo({\n            targetAmount: updatedClient.targetAmount,\n            remainingAmount: updatedClient.remainingAmount,\n          })\n        }\n      }, 2000)\n\n      return () => clearInterval(interval)\n    }\n  }, [user?.id, getClientById])\n\n  const stats = {\n    pending: payments.filter((p) => p.status === \"pending\").length,\n    approved: payments.filter((p) => p.status === \"approved\").length,\n    rejected: payments.filter((p) => p.status === \"rejected\").length,\n  }\n\n  const approvedTotal = payments.filter((p) => p.status === \"approved\").reduce((sum, p) => sum + p.amount, 0)\n\n  const summary = clientInfo\n    ? {\n        targetAmount: clientInfo.targetAmount,\n        totalApproved: approvedTotal,\n        remaining: clientInfo.remainingAmount,\n      }\n    : { targetAmount: 10000, totalApproved: 0, remaining: 10000 }\n\n  const progressPercent =\n    clientInfo && clientInfo.targetAmount > 0\n      ? Math.min(100, ((clientInfo.targetAmount - clientInfo.remainingAmount) / clientInfo.targetAmount) * 100)\n      : 0\n\n  return (\n    <div className=\"space-y-6 max-w-4xl mx-auto\">\n      {clientInfo && (\n        <div className=\"bg-gradient-to-r from-primary/20 to-primary/5 border border-primary/30 rounded-lg p-4 sm:p-6\">\n          <h2 className=\"text-sm sm:text-lg font-semibold text-foreground mb-3 sm:mb-4 flex items-center gap-2\">\n            <Target className=\"h-4 w-4 sm:h-5 sm:w-5 text-primary\" />\n            Payment Target\n          </h2>\n          <div className=\"grid grid-cols-3 gap-2 sm:gap-4 mb-3 sm:mb-4\">\n            <div className=\"bg-background/50 rounded-lg p-2 sm:p-4 text-center\">\n              <p className=\"text-[10px] sm:text-sm text-muted mb-1\">Total Target</p>\n              <p className=\"text-sm sm:text-2xl font-bold text-primary flex items-center justify-center\">\n                <IndianRupee className=\"h-3 w-3 sm:h-5 sm:w-5\" />\n                {clientInfo.targetAmount.toLocaleString(\"en-IN\")}\n              </p>\n            </div>\n            <div className=\"bg-background/50 rounded-lg p-2 sm:p-4 text-center\">\n              <p className=\"text-[10px] sm:text-sm text-muted mb-1\">Paid</p>\n              <p className=\"text-sm sm:text-2xl font-bold text-green-500 flex items-center justify-center\">\n                <IndianRupee className=\"h-3 w-3 sm:h-5 sm:w-5\" />\n                {(clientInfo.targetAmount - clientInfo.remainingAmount).toLocaleString(\"en-IN\")}\n              </p>\n            </div>\n            <div className=\"bg-background/50 rounded-lg p-2 sm:p-4 text-center\">\n              <p className=\"text-[10px] sm:text-sm text-muted mb-1 flex items-center justify-center gap-1\">\n                <TrendingDown className=\"h-3 w-3\" />\n                Remaining\n              </p>\n              <p className=\"text-sm sm:text-2xl font-bold text-yellow-500 flex items-center justify-center\">\n                <IndianRupee className=\"h-3 w-3 sm:h-5 sm:w-5\" />\n                {clientInfo.remainingAmount.toLocaleString(\"en-IN\")}\n              </p>\n            </div>\n          </div>\n          <div className=\"space-y-1 sm:space-y-2\">\n            <div className=\"flex justify-between text-[10px] sm:text-sm\">\n              <span className=\"text-muted\">Progress</span>\n              <span className=\"text-foreground font-medium\">{progressPercent.toFixed(1)}%</span>\n            </div>\n            <div className=\"h-2 sm:h-3 bg-background/50 rounded-full overflow-hidden\">\n              <div\n                className=\"h-full bg-gradient-to-r from-primary to-green-500 rounded-full transition-all duration-500\"\n                style={{ width: `${progressPercent}%` }}\n              />\n            </div>\n          </div>\n        </div>\n      )}\n\n      <div className=\"grid grid-cols-2 md:grid-cols-4 gap-2 sm:gap-4\">\n        <div className=\"bg-muted-background/30 border border-muted/30 rounded p-2 sm:p-4\">\n          <p className=\"text-[10px] sm:text-sm text-muted mb-1\">Total Submitted</p>\n          <p className=\"text-xl sm:text-3xl font-bold text-foreground\">{payments.length}</p>\n        </div>\n        <div className=\"bg-warning/10 border border-muted/30 rounded p-2 sm:p-4\">\n          <p className=\"text-[10px] sm:text-sm text-muted mb-1\">Pending</p>\n          <p className=\"text-xl sm:text-3xl font-bold text-warning\">{stats.pending}</p>\n        </div>\n        <div className=\"bg-success/10 border border-muted/30 rounded p-2 sm:p-4\">\n          <p className=\"text-[10px] sm:text-sm text-muted mb-1\">Approved</p>\n          <p className=\"text-xl sm:text-3xl font-bold text-success\">₹{approvedTotal.toLocaleString(\"en-IN\")}</p>\n        </div>\n        <div className=\"bg-destructive/10 border border-muted/30 rounded p-2 sm:p-4\">\n          <p className=\"text-[10px] sm:text-sm text-muted mb-1\">Rejected</p>\n          <p className=\"text-xl sm:text-3xl font-bold text-destructive\">{stats.rejected}</p>\n        </div>\n      </div>\n\n      <MonthlyProgressCard summary={summary} monthlyData={monthlyData} targetAmount={summary.targetAmount} />\n\n      <div className=\"bg-primary/10 border border-primary/20 rounded p-4\">\n        <p className=\"text-sm text-muted\">How to submit a payment:</p>\n        <ul className=\"text-sm text-foreground mt-2 space-y-1 ml-4 list-disc\">\n          <li>Fill in the payment details and amount</li>\n          <li>Attach a proof document (receipt, invoice, screenshot)</li>\n          <li>Submit for review - our OCR system will verify the amount</li>\n          <li>Wait for admin approval</li>\n        </ul>\n      </div>\n\n      <PaymentSubmissionForm\n        onSubmit={async () => {\n          const clientPayments = await getPaymentsByClient(user!.id)\n          setPayments(clientPayments)\n        }}\n      />\n\n      <div className=\"space-y-4\">\n        <h2 className=\"text-lg font-semibold text-foreground\">Payment History</h2>\n        {payments.length > 0 ? (\n          <div className=\"grid gap-4\">\n            {payments.map((payment) => (\n              <PaymentHistoryCard key={payment.id} payment={payment} />\n            ))}\n          </div>\n        ) : (\n          <div className=\"text-center py-12 bg-muted-background rounded border border-muted/30\">\n            <p className=\"text-muted\">No payments submitted yet</p>\n          </div>\n        )}\n      </div>\n    </div>\n  )\n}\n"],"names":[],"mappings":"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"}}]
}
{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///P:/payment_tracking_app/lib/notifications.ts"],"sourcesContent":["export interface Notification {\n  id: string\n  userId: string\n  type: \"payment_approved\" | \"payment_rejected\" | \"payment_submitted\"\n  title: string\n  message: string\n  paymentId: string\n  read: boolean\n  createdAt: string\n}\n\nconst NOTIFICATIONS_KEY = \"paymentTracker_notifications\"\n\nexport function getNotifications(userId: string): Notification[] {\n  if (typeof window === \"undefined\") return []\n  const stored = localStorage.getItem(NOTIFICATIONS_KEY)\n  const all: Notification[] = stored ? JSON.parse(stored) : []\n  return all.filter((n) => n.userId === userId)\n}\n\nexport function createNotification(\n  userId: string,\n  type: Notification[\"type\"],\n  paymentId: string,\n  title: string,\n  message: string,\n): void {\n  if (typeof window === \"undefined\") return\n  const stored = localStorage.getItem(NOTIFICATIONS_KEY)\n  const all: Notification[] = stored ? JSON.parse(stored) : []\n\n  const notification: Notification = {\n    id: `notif_${Date.now()}`,\n    userId,\n    type,\n    title,\n    message,\n    paymentId,\n    read: false,\n    createdAt: new Date().toISOString(),\n  }\n\n  all.push(notification)\n  localStorage.setItem(NOTIFICATIONS_KEY, JSON.stringify(all))\n\n  if (\"Notification\" in window && Notification.permission === \"granted\") {\n    new Notification(title, { body: message })\n  }\n}\n\nexport function markNotificationAsRead(notificationId: string): void {\n  if (typeof window === \"undefined\") return\n  const stored = localStorage.getItem(NOTIFICATIONS_KEY)\n  const all: Notification[] = stored ? JSON.parse(stored) : []\n\n  const notification = all.find((n) => n.id === notificationId)\n  if (notification) {\n    notification.read = true\n    localStorage.setItem(NOTIFICATIONS_KEY, JSON.stringify(all))\n  }\n}\n\nexport function requestNotificationPermission(): void {\n  if (\"Notification\" in window && Notification.permission === \"default\") {\n    Notification.requestPermission()\n  }\n}\n"],"names":[],"mappings":";;;;;;;;;;AAWA,MAAM,oBAAoB;AAEnB,SAAS,iBAAiB,MAAc;IAC7C;;IACA,MAAM,SAAS,aAAa,OAAO,CAAC;IACpC,MAAM,MAAsB,SAAS,KAAK,KAAK,CAAC,UAAU,EAAE;IAC5D,OAAO,IAAI,MAAM,CAAC,CAAC,IAAM,EAAE,MAAM,KAAK;AACxC;AAEO,SAAS,mBACd,MAAc,EACd,IAA0B,EAC1B,SAAiB,EACjB,KAAa,EACb,OAAe;IAEf;;IACA,MAAM,SAAS,aAAa,OAAO,CAAC;IACpC,MAAM,MAAsB,SAAS,KAAK,KAAK,CAAC,UAAU,EAAE;IAE5D,MAAM,eAA6B;QACjC,IAAI,CAAC,MAAM,EAAE,KAAK,GAAG,IAAI;QACzB;QACA;QACA;QACA;QACA;QACA,MAAM;QACN,WAAW,IAAI,OAAO,WAAW;IACnC;IAEA,IAAI,IAAI,CAAC;IACT,aAAa,OAAO,CAAC,mBAAmB,KAAK,SAAS,CAAC;IAEvD,IAAI,kBAAkB,UAAU,aAAa,UAAU,KAAK,WAAW;QACrE,IAAI,aAAa,OAAO;YAAE,MAAM;QAAQ;IAC1C;AACF;AAEO,SAAS,uBAAuB,cAAsB;IAC3D;;IACA,MAAM,SAAS,aAAa,OAAO,CAAC;IACpC,MAAM,MAAsB,SAAS,KAAK,KAAK,CAAC,UAAU,EAAE;IAE5D,MAAM,eAAe,IAAI,IAAI,CAAC,CAAC,IAAM,EAAE,EAAE,KAAK;IAC9C,IAAI,cAAc;QAChB,aAAa,IAAI,GAAG;QACpB,aAAa,OAAO,CAAC,mBAAmB,KAAK,SAAS,CAAC;IACzD;AACF;AAEO,SAAS;IACd,IAAI,kBAAkB,UAAU,aAAa,UAAU,KAAK,WAAW;QACrE,aAAa,iBAAiB;IAChC;AACF"}},
    {"offset": {"line": 68, "column": 0}, "map": {"version":3,"sources":["file:///P:/payment_tracking_app/components/notifications-bell.tsx"],"sourcesContent":["\"use client\"\n\nimport { useAuth } from \"@/lib/auth-context\"\nimport { getNotifications, markNotificationAsRead, requestNotificationPermission } from \"@/lib/notifications\"\nimport { useEffect, useState } from \"react\"\n\nexport default function NotificationsBell() {\n  const { user } = useAuth()\n  const [notifications, setNotifications] = useState<any[]>([])\n  const [isOpen, setIsOpen] = useState(false)\n\n  useEffect(() => {\n    requestNotificationPermission()\n\n    if (user?.id) {\n      const userNotifications = getNotifications(user.id)\n      setNotifications(userNotifications)\n\n      const interval = setInterval(() => {\n        setNotifications(getNotifications(user.id))\n      }, 2000)\n\n      return () => clearInterval(interval)\n    }\n  }, [user?.id])\n\n  const unreadCount = notifications.filter((n) => !n.read).length\n\n  return (\n    <div className=\"relative\">\n      <button onClick={() => setIsOpen(!isOpen)} className=\"relative p-2 hover:bg-muted-background rounded\">\n        <svg className=\"w-5 h-5 text-foreground\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n          <path\n            strokeLinecap=\"round\"\n            strokeLinejoin=\"round\"\n            strokeWidth={2}\n            d=\"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9\"\n          />\n        </svg>\n        {unreadCount > 0 && <span className=\"absolute top-1 right-1 w-2 h-2 bg-warning rounded-full\" />}\n      </button>\n\n      {isOpen && (\n        <div className=\"absolute right-0 mt-2 w-80 bg-muted-background border border-muted/30 rounded-lg shadow-lg z-50 max-h-96 overflow-y-auto\">\n          <div className=\"p-4 border-b border-muted/30\">\n            <h3 className=\"font-semibold text-foreground\">Notifications</h3>\n          </div>\n\n          {notifications.length > 0 ? (\n            <div className=\"divide-y divide-muted/30\">\n              {notifications.map((notification) => (\n                <div\n                  key={notification.id}\n                  onClick={() => {\n                    markNotificationAsRead(notification.id)\n                    setNotifications(getNotifications(user!.id))\n                  }}\n                  className={`p-3 cursor-pointer hover:bg-background/50 transition-colors ${\n                    !notification.read ? \"bg-primary/10\" : \"\"\n                  }`}\n                >\n                  <p className=\"font-medium text-foreground text-sm\">{notification.title}</p>\n                  <p className=\"text-muted text-xs mt-1\">{notification.message}</p>\n                  <p className=\"text-muted text-xs mt-2\">{new Date(notification.createdAt).toLocaleDateString()}</p>\n                </div>\n              ))}\n            </div>\n          ) : (\n            <div className=\"p-8 text-center\">\n              <p className=\"text-muted text-sm\">No notifications yet</p>\n            </div>\n          )}\n        </div>\n      )}\n    </div>\n  )\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;;;AAJA;;;;AAMe,SAAS;;IACtB,MAAM,EAAE,IAAI,EAAE,GAAG,IAAA,6JAAO;IACxB,MAAM,CAAC,eAAe,iBAAiB,GAAG,IAAA,iMAAQ,EAAQ,EAAE;IAC5D,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,iMAAQ,EAAC;IAErC,IAAA,kMAAS;uCAAC;YACR,IAAA,gLAA6B;YAE7B,IAAI,MAAM,IAAI;gBACZ,MAAM,oBAAoB,IAAA,mKAAgB,EAAC,KAAK,EAAE;gBAClD,iBAAiB;gBAEjB,MAAM,WAAW;4DAAY;wBAC3B,iBAAiB,IAAA,mKAAgB,EAAC,KAAK,EAAE;oBAC3C;2DAAG;gBAEH;mDAAO,IAAM,cAAc;;YAC7B;QACF;sCAAG;QAAC,MAAM;KAAG;IAEb,MAAM,cAAc,cAAc,MAAM,CAAC,CAAC,IAAM,CAAC,EAAE,IAAI,EAAE,MAAM;IAE/D,qBACE,qNAAC;QAAI,WAAU;;0BACb,qNAAC;gBAAO,SAAS,IAAM,UAAU,CAAC;gBAAS,WAAU;;kCACnD,qNAAC;wBAAI,WAAU;wBAA0B,MAAK;wBAAO,QAAO;wBAAe,SAAQ;kCACjF,cAAA,qNAAC;4BACC,eAAc;4BACd,gBAAe;4BACf,aAAa;4BACb,GAAE;;;;;;;;;;;oBAGL,cAAc,mBAAK,qNAAC;wBAAK,WAAU;;;;;;;;;;;;YAGrC,wBACC,qNAAC;gBAAI,WAAU;;kCACb,qNAAC;wBAAI,WAAU;kCACb,cAAA,qNAAC;4BAAG,WAAU;sCAAgC;;;;;;;;;;;oBAG/C,cAAc,MAAM,GAAG,kBACtB,qNAAC;wBAAI,WAAU;kCACZ,cAAc,GAAG,CAAC,CAAC,6BAClB,qNAAC;gCAEC,SAAS;oCACP,IAAA,yKAAsB,EAAC,aAAa,EAAE;oCACtC,iBAAiB,IAAA,mKAAgB,EAAC,KAAM,EAAE;gCAC5C;gCACA,WAAW,CAAC,4DAA4D,EACtE,CAAC,aAAa,IAAI,GAAG,kBAAkB,IACvC;;kDAEF,qNAAC;wCAAE,WAAU;kDAAuC,aAAa,KAAK;;;;;;kDACtE,qNAAC;wCAAE,WAAU;kDAA2B,aAAa,OAAO;;;;;;kDAC5D,qNAAC;wCAAE,WAAU;kDAA2B,IAAI,KAAK,aAAa,SAAS,EAAE,kBAAkB;;;;;;;+BAXtF,aAAa,EAAE;;;;;;;;;6CAgB1B,qNAAC;wBAAI,WAAU;kCACb,cAAA,qNAAC;4BAAE,WAAU;sCAAqB;;;;;;;;;;;;;;;;;;;;;;;AAOhD;GAtEwB;;QACL,6JAAO;;;KADF"}},
    {"offset": {"line": 251, "column": 0}, "map": {"version":3,"sources":["file:///P:/payment_tracking_app/app/client/layout.tsx"],"sourcesContent":["\"use client\"\n\nimport type React from \"react\"\n\nimport { useAuth } from \"@/lib/auth-context\"\nimport { useRouter } from \"next/navigation\"\nimport { useEffect } from \"react\"\nimport NotificationsBell from \"@/components/notifications-bell\"\n\nexport default function ClientLayout({\n  children,\n}: {\n  children: React.ReactNode\n}) {\n  const { isAuthenticated, user, isLoading, logout } = useAuth()\n  const router = useRouter()\n\n  useEffect(() => {\n    if (!isLoading && (!isAuthenticated || user?.role !== \"client\")) {\n      router.push(\"/auth/login\")\n    }\n  }, [isAuthenticated, user?.role, isLoading, router])\n\n  if (isLoading) {\n    return (\n      <div className=\"flex items-center justify-center min-h-screen\">\n        <div className=\"animate-pulse\">Loading...</div>\n      </div>\n    )\n  }\n\n  if (!isAuthenticated || user?.role !== \"client\") {\n    return null\n  }\n\n  const handleLogout = () => {\n    logout()\n    router.push(\"/auth/login\")\n  }\n\n  return (\n    <div className=\"min-h-screen bg-background\">\n      <header className=\"border-b border-muted-background bg-muted-background/50 sticky top-0 z-40\">\n        <div className=\"px-3 sm:px-6 py-2 sm:py-4 flex items-center justify-between\">\n          <div>\n            <h1 className=\"text-lg sm:text-2xl font-bold text-foreground\">Hi, {user?.name || \"Client\"}</h1>\n            <p className=\"text-xs sm:text-sm text-muted\">Payment Tracker - Client Portal</p>\n          </div>\n          <div className=\"flex items-center gap-2 sm:gap-4\">\n            <NotificationsBell />\n            <span className=\"text-xs sm:text-sm text-muted hidden sm:inline\">{user?.email}</span>\n            <button\n              onClick={handleLogout}\n              className=\"px-2 sm:px-3 py-1 rounded bg-destructive text-primary-foreground text-xs sm:text-sm hover:opacity-90\"\n            >\n              Logout\n            </button>\n          </div>\n        </div>\n      </header>\n      <main className=\"p-3 sm:p-6\">{children}</main>\n    </div>\n  )\n}\n"],"names":[],"mappings":";;;;;AAIA;AACA;AACA;AACA;;;AAPA;;;;;AASe,SAAS,aAAa,EACnC,QAAQ,EAGT;;IACC,MAAM,EAAE,eAAe,EAAE,IAAI,EAAE,SAAS,EAAE,MAAM,EAAE,GAAG,IAAA,6JAAO;IAC5D,MAAM,SAAS,IAAA,0KAAS;IAExB,IAAA,kMAAS;kCAAC;YACR,IAAI,CAAC,aAAa,CAAC,CAAC,mBAAmB,MAAM,SAAS,QAAQ,GAAG;gBAC/D,OAAO,IAAI,CAAC;YACd;QACF;iCAAG;QAAC;QAAiB,MAAM;QAAM;QAAW;KAAO;IAEnD,IAAI,WAAW;QACb,qBACE,qNAAC;YAAI,WAAU;sBACb,cAAA,qNAAC;gBAAI,WAAU;0BAAgB;;;;;;;;;;;IAGrC;IAEA,IAAI,CAAC,mBAAmB,MAAM,SAAS,UAAU;QAC/C,OAAO;IACT;IAEA,MAAM,eAAe;QACnB;QACA,OAAO,IAAI,CAAC;IACd;IAEA,qBACE,qNAAC;QAAI,WAAU;;0BACb,qNAAC;gBAAO,WAAU;0BAChB,cAAA,qNAAC;oBAAI,WAAU;;sCACb,qNAAC;;8CACC,qNAAC;oCAAG,WAAU;;wCAAgD;wCAAK,MAAM,QAAQ;;;;;;;8CACjF,qNAAC;oCAAE,WAAU;8CAAgC;;;;;;;;;;;;sCAE/C,qNAAC;4BAAI,WAAU;;8CACb,qNAAC,0KAAiB;;;;;8CAClB,qNAAC;oCAAK,WAAU;8CAAkD,MAAM;;;;;;8CACxE,qNAAC;oCACC,SAAS;oCACT,WAAU;8CACX;;;;;;;;;;;;;;;;;;;;;;;0BAMP,qNAAC;gBAAK,WAAU;0BAAc;;;;;;;;;;;;AAGpC;GAtDwB;;QAK+B,6JAAO;QAC7C,0KAAS;;;KANF"}}]
}